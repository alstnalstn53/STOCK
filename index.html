<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Material Studio Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- TradingView 차트 위젯 -->
  <script src="https://s3.tradingview.com/tv.js"></script>
  <style>
    :root {
      --bg: #f5f5f5;
      --card-bg: #ffffff;
      --text-main: #111827;
      --text-sub: #6b7280;
      --line: #e5e7eb;
      --accent: #111827;
      --positive: #16a34a;
      --negative: #dc2626;
    }
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
    }
    body {
      margin: 0;
      padding: 32px 24px 40px;
      background: var(--bg);
      color: var(--text-main);
    }
    .page {
      max-width: 1200px;
      margin: 0 auto;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      gap: 24px;
      margin-bottom: 32px;
      border-bottom: 1px solid var(--line);
      padding-bottom: 16px;
    }
    .title-block h1 {
      margin: 0 0 4px;
      font-weight: 700;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      font-size: 18px;
    }
    .title-block .sub {
      font-size: 12px;
      color: var(--text-sub);
      letter-spacing: 0.16em;
      text-transform: uppercase;
      font-weight: 600;
    }
    .meta {
      text-align: right;
      font-size: 11px;
      color: var(--text-sub);
      line-height: 1.5;
    }
    .controls {
      margin-top: 6px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 8px;
    }
    .controls button {
      border-radius: 999px;
      border: 1px solid var(--text-main);
      background: var(--text-main);
      color: white;
      font-size: 11px;
      padding: 5px 12px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      cursor: pointer;
    }
    .controls button:hover {
      opacity: 0.9;
    }
    main {
      display: grid;
      grid-template-columns: 3fr 2fr;
      gap: 16px;
    }
    @media (max-width: 900px) {
      main {
        grid-template-columns: 1fr;
      }
      header {
        flex-direction: column;
        align-items: stretch;
      }
      .meta {
        text-align: left;
      }
    }
    section.card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 16px 18px 14px;
      border: 1px solid var(--line);
    }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-bottom: 10px;
    }
    .card-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      font-weight: 800;
    }
    .card-sub {
      font-size: 11px;
      color: var(--text-sub);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 600;
    }
    .tag {
      font-size: 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      padding: 3px 8px;
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      white-space: nowrap;
      font-weight: 600;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }
    th, td {
      padding: 6px 4px;
      border-bottom: 1px solid #f3f4f6;
      text-align: right;
      white-space: nowrap;
    }
    th:first-child,
    td:first-child {
      text-align: left;
    }
    th {
      font-weight: 800;
      color: var(--text-sub);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      cursor: pointer;
    }
    th.sortable::after {
      content: " ";
      display: inline-block;
      margin-left: 4px;
      border: 4px solid transparent;
      border-top-color: #cbd5f5;
      transform: translateY(2px);
    }
    th[data-sort-dir="asc"].sortable::after {
      border-top-color: #111827;
      transform: rotate(180deg) translateY(-2px);
    }
    th[data-sort-dir="desc"].sortable::after {
      border-top-color: #111827;
    }
    tbody tr:last-child td {
      border-bottom: none;
    }
    .muted { color: var(--text-sub); }
    .positive { color: var(--positive); font-weight: 600; }
    .negative { color: var(--negative); font-weight: 600; }
    .clickable-row { cursor: pointer; }
    .clickable-row:hover { background: #f9fafb; }
    .small-note {
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-sub);
    }
    .sector-block {
      margin-top: 10px;
      border-top: 1px solid #e5e7eb;
      padding-top: 8px;
    }
    .sector-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-sub);
      margin-bottom: 4px;
      font-weight: 800;
    }
    .insight-box {
      font-size: 12px;
      line-height: 1.6;
      padding: 10px 8px 6px;
      background: #f9fafb;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="title-block">
        <h1>MATERIAL STUDIO PORTFOLIO</h1>
        <div class="sub">EQUITIES · CRYPTO · FX · YIELD</div>
      </div>
      <div class="meta">
        <div id="last-updated">Last update – –</div>
        <div class="controls">
          <button id="manual-refresh">REFRESH</button>
        </div>
      </div>
    </header>

    <main>
      <!-- 왼쪽: Equities -->
      <div class="left-column">
        <section class="card" id="equities">
          <div class="card-header">
            <div>
              <div class="card-title">Equities</div>
              <div class="card-sub">AI · Data Center · Ecosystem</div>
            </div>
            <div class="tag">Alpha Vantage · TradingView</div>
          </div>
          <div id="stocks-container"></div>
          <div class="small-note">
            * 페이지 로딩/REFRESH 시 전 종목 가격을 한 번에 불러옵니다.<br>
            행을 클릭하면 Company Insight + 실시간 차트가 펼쳐지고, 다시 클릭하면 접힙니다.<br>
            섹터별 테이블에서 Price / Change / Δ% 헤더를 클릭하면 오름차순·내림차순 정렬이 됩니다.
          </div>
        </section>
      </div>

      <!-- 오른쪽: FX + Crypto + Staking -->
      <div class="right-column">
        <section class="card" id="fx">
          <div class="card-header">
            <div>
              <div class="card-title">FX</div>
              <div class="card-sub">KRW base · Major pairs</div>
            </div>
            <div class="tag">open.er-api.com</div>
          </div>
          <table id="fx-table">
            <thead>
              <tr>
                <th>Pair</th>
                <th>Rate</th>
                <th>Δ</th>
                <th>Δ%</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </section>

        <section class="card" id="crypto">
          <div class="card-header">
            <div>
              <div class="card-title">Crypto Market</div>
              <div class="card-sub">Top 15 · Market Cap · Volume</div>
            </div>
            <div class="tag">CoinGecko</div>
          </div>
          <table id="crypto-table">
            <thead>
              <tr>
                <th>Symbol</th>
                <th>Name</th>
                <th>USD</th>
                <th>KRW</th>
                <th>24h</th>
                <th>Vol 24h (USD)</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </section>

        <section class="card" id="yield">
          <div class="card-header">
            <div>
              <div class="card-title">Staking Yield</div>
              <div class="card-sub">Manual Snapshot · APY</div>
            </div>
            <div class="tag">On-chain / CeFi</div>
          </div>
          <table id="staking-table">
            <thead>
              <tr>
                <th>Asset</th>
                <th>Platform</th>
                <th>APY</th>
                <th>Note</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="small-note">
            지금은 수동 입력 값입니다. 나중에 DeFi API로 연결 가능.
          </div>
        </section>
      </div>
    </main>
  </div>

  <script>
    // ---------- Alpha Vantage 키 ----------
    const ALPHAVANTAGE_KEY = "R7DXANGD15UFEE8K";

    // ---------- 종목 리스트 ----------
    const stocks = [
      { symbol: "AAPL",  name: "Apple" },
      { symbol: "ABNB",  name: "Airbnb" },
      { symbol: "ADBE",  name: "Adobe" },
      { symbol: "AG",    name: "First Majestic Silver" },
      { symbol: "AGX",   name: "Argan" },
      { symbol: "ALAB",  name: "Astera Labs" },
      { symbol: "ALL",   name: "Allstate" },
      { symbol: "AMAT",  name: "Applied Materials" },
      { symbol: "AMGN",  name: "Amgen" },
      { symbol: "AMZN",  name: "Amazon" },
      { symbol: "ANET",  name: "Arista Networks" },
      { symbol: "ANSS",  name: "Ansys" },
      { symbol: "APP",   name: "AppLovin" },
      { symbol: "ARM",   name: "Arm Holdings" },
      { symbol: "ASML",  name: "ASML" },
      { symbol: "AVGO",  name: "Broadcom" },

      { symbol: "BE",    name: "Bloom Energy" },
      { symbol: "BK",    name: "Bank of New York Mellon" },
      { symbol: "BLK",   name: "BlackRock" },
      { symbol: "BMNR",  name: "BitMine Immersion Technologies" },
      { symbol: "BSX",   name: "Boston Scientific" },
      { symbol: "BTDR",  name: "Bitdeer Technologies" },

      { symbol: "CAT",   name: "Caterpillar" },
      { symbol: "CDNS",  name: "Cadence Design Systems" },
      { symbol: "CDNA",  name: "CareDx" },
      { symbol: "CEG",   name: "Constellation Energy" },
      { symbol: "CELH",  name: "Celsius Holdings" },
      { symbol: "CL",    name: "Colgate-Palmolive" },
      { symbol: "CLSK",  name: "CleanSpark" },
      { symbol: "CLS",   name: "Celestica" },
      { symbol: "COHR",  name: "Coherent" },
      { symbol: "COIN",  name: "Coinbase" },
      { symbol: "COST",  name: "Costco" },
      { symbol: "CRDO",  name: "Credo Technology" },
      { symbol: "CRM",   name: "Salesforce" },
      { symbol: "CSCO",  name: "Cisco Systems" },
      { symbol: "C3AI",  name: "C3.ai" },
      { symbol: "CRS",   name: "Carpenter Technology" },

      { symbol: "DASH",  name: "DoorDash" },
      { symbol: "DDOG",  name: "Datadog" },
      { symbol: "DE",    name: "Deere & Company" },
      { symbol: "DLR",   name: "Digital Realty Trust" },
      { symbol: "DHI",   name: "D.R. Horton" },
      { symbol: "DIS",   name: "Walt Disney" },

      { symbol: "ETN",   name: "Eaton" },
      { symbol: "ETOR",  name: "eToro Group" },
      { symbol: "ETRN",  name: "Equitrans Midstream" },
      { symbol: "EW",    name: "Edwards Lifesciences" },
      { symbol: "EXAS",  name: "Exact Sciences" },
      { symbol: "EQIX",  name: "Equinix" },

      { symbol: "FABR",  name: "Fabrinet" },
      { symbol: "FSLR",  name: "First Solar" },
      { symbol: "FUTU",  name: "Futu Holdings" },

      { symbol: "GE",    name: "GE Aerospace" },
      { symbol: "GEL",   name: "Genesis Energy" },
      { symbol: "GEN",   name: "Generac" },
      { symbol: "GME",   name: "GameStop" },
      { symbol: "GOOGL", name: "Alphabet (Google)" },
      { symbol: "GCM",   name: "Genius Sports" },

      { symbol: "HPE",   name: "Hewlett Packard Enterprise" },
      { symbol: "HUT",   name: "Hut 8 Mining" },

      { symbol: "IBM",   name: "IBM" },
      { symbol: "IESC",  name: "IES Holdings" },
      { symbol: "INTC",  name: "Intel" },
      { symbol: "IONQ",  name: "IonQ" },
      { symbol: "ISRG",  name: "Intuitive Surgical" },
      { symbol: "ITRI",  name: "Itron" },
      { symbol: "IVZ",   name: "Invesco" },

      { symbol: "JBL",   name: "Jabil" },
      { symbol: "JNPR",  name: "Juniper Networks" },

      { symbol: "KO",    name: "Coca-Cola" },
      { symbol: "KTOS",  name: "Kratos Defense" },

      { symbol: "LLY",   name: "Eli Lilly" },
      { symbol: "LMT",   name: "Lockheed Martin" },
      { symbol: "LRCX",  name: "Lam Research" },
      { symbol: "LOW",   name: "Lowe’s" },

      { symbol: "MARA",  name: "Marathon Digital" },
      { symbol: "MCHP",  name: "Microchip Technology" },
      { symbol: "META",  name: "Meta Platforms" },
      { symbol: "MNTK",  name: "Montauk Renewables" },
      { symbol: "MRNA",  name: "Moderna" },
      { symbol: "MRVL",  name: "Marvell Technology" },
      { symbol: "MP",    name: "MP Materials" },
      { symbol: "MU",    name: "Micron Technology" },
      { symbol: "MSFT",  name: "Microsoft" },
      { symbol: "MPW",   name: "Medical Properties Trust" },

      { symbol: "NET",   name: "Cloudflare" },
      { symbol: "NEE",   name: "NextEra Energy" },
      { symbol: "NFLX",  name: "Netflix" },
      { symbol: "NIO",   name: "NIO" },
      { symbol: "NRIX",  name: "Nurix Therapeutics" },
      { symbol: "NOW",   name: "ServiceNow" },
      { symbol: "NU",    name: "Nu Holdings" },
      { symbol: "NVDA",  name: "NVIDIA" },
      { symbol: "NUE",   name: "Nucor" },

      { symbol: "OKLO",  name: "Oklo" },
      { symbol: "ORCL",  name: "Oracle" },
      { symbol: "OTTR",  name: "Otter Tail" },

      { symbol: "PAGS",  name: "PagSeguro" },
      { symbol: "PANW",  name: "Palo Alto Networks" },
      { symbol: "PATH",  name: "UiPath" },
      { symbol: "PEP",   name: "PepsiCo" },
      { symbol: "PH",    name: "Parker-Hannifin" },
      { symbol: "PLTR",  name: "Palantir" },
      { symbol: "PNW",   name: "Pinnacle West" },
      { symbol: "PYPL",  name: "PayPal" },

      { symbol: "QCOM",  name: "Qualcomm" },
      { symbol: "QSR",   name: "Restaurant Brands Intl." },

      { symbol: "RBLX",  name: "Roblox" },
      { symbol: "RDFN",  name: "Redfin" },
      { symbol: "RIOT",  name: "Riot Platforms" },

      { symbol: "SBUX",  name: "Starbucks" },
      { symbol: "SMCI",  name: "Super Micro Computer" },
      { symbol: "SMR",   name: "NuScale Power" },
      { symbol: "SITM",  name: "SiTime" },
      { symbol: "SHOP",  name: "Shopify" },
      { symbol: "SNOW",  name: "Snowflake" },
      { symbol: "SOFI",  name: "SoFi" },
      { symbol: "SPOT",  name: "Spotify" },
      { symbol: "SQ",    name: "Block" },
      { symbol: "STLD",  name: "Steel Dynamics" },
      { symbol: "STRL",  name: "Sterling Infrastructure" },
      { symbol: "STX",   name: "Seagate" },
      { symbol: "SWKS",  name: "Skyworks" },

      { symbol: "TDY",   name: "Teledyne" },
      { symbol: "TEAM",  name: "Atlassian" },
      { symbol: "TEVA",  name: "Teva" },
      { symbol: "TMO",   name: "Thermo Fisher" },
      { symbol: "TSLA",  name: "Tesla" },
      { symbol: "TSM",   name: "Taiwan Semi" },
      { symbol: "TTM",   name: "TTM Technologies" },
      { symbol: "TWLO",  name: "Twilio" },

      { symbol: "UBER",  name: "Uber" },
      { symbol: "UPST",  name: "Upstart" },

      { symbol: "VCYT",  name: "Veracyte" },
      { symbol: "VMC",   name: "Vulcan Materials" },
      { symbol: "VRTX",  name: "Vertex" },
      { symbol: "VRT",   name: "Vertiv" },
      { symbol: "VZ",    name: "Verizon" },

      { symbol: "WDC",   name: "Western Digital" },
      { symbol: "WMT",   name: "Walmart" },
      { symbol: "WTW",   name: "Willis Towers Watson" },

      { symbol: "ZI",    name: "ZoomInfo" },
      { symbol: "ZBRA",  name: "Zebra" },
      { symbol: "ZM",    name: "Zoom Video" }
    ];

    // ---------- 섹터 그룹 ----------
    const sectorTag = {
      NVDA:"AI / Data Center Core", MSFT:"AI / Data Center Core",
      AMZN:"AI / Data Center Core", META:"AI / Data Center Core",
      GOOGL:"AI / Data Center Core", SMCI:"AI / Data Center Core",
      ANET:"AI / Data Center Core", VRT:"AI / Data Center Core",
      EQIX:"AI / Data Center Core", DLR:"AI / Data Center Core",
      NOW:"AI / Data Center Core", NET:"AI / Data Center Core",
      SNOW:"AI / Data Center Core", DDOG:"AI / Data Center Core",
      PLTR:"AI / Data Center Core", CRM:"AI / Data Center Core",

      AVGO:"Semiconductors & EDA", ASML:"Semiconductors & EDA",
      CDNS:"Semiconductors & EDA", MRVL:"Semiconductors & EDA",
      TSM:"Semiconductors & EDA", SITM:"Semiconductors & EDA",
      INTC:"Semiconductors & EDA", MU:"Semiconductors & EDA",
      AMAT:"Semiconductors & EDA", LRCX:"Semiconductors & EDA",
      MCHP:"Semiconductors & EDA", COHR:"Semiconductors & EDA",
      ARM:"Semiconductors & EDA", SWKS:"Semiconductors & EDA",

      BE:"Energy / Power / Nuclear", CEG:"Energy / Power / Nuclear",
      NEE:"Energy / Power / Nuclear", SMR:"Energy / Power / Nuclear",
      OKLO:"Energy / Power / Nuclear", MNTK:"Energy / Power / Nuclear",
      ETN:"Energy / Power / Nuclear", PNW:"Energy / Power / Nuclear",

      BLK:"Financials / Brokers", BK:"Financials / Brokers",
      NU:"Financials / Brokers", SOFI:"Financials / Brokers",
      COIN:"Financials / Brokers", FUTU:"Financials / Brokers",
      ETOR:"Financials / Brokers", IVZ:"Financials / Brokers",
      PYPL:"Financials / Brokers", UPST:"Financials / Brokers",

      MARA:"Crypto Miners", RIOT:"Crypto Miners",
      BTDR:"Crypto Miners", HUT:"Crypto Miners",
      BMNR:"Crypto Miners", CLSK:"Crypto Miners",

      LLY:"Healthcare / Bio", AMGN:"Healthcare / Bio",
      MRNA:"Healthcare / Bio", ISRG:"Healthcare / Bio",
      EXAS:"Healthcare / Bio", VRTX:"Healthcare / Bio",
      TEVA:"Healthcare / Bio", EW:"Healthcare / Bio",
      CDNA:"Healthcare / Bio", VCYT:"Healthcare / Bio",
      NRIX:"Healthcare / Bio", TMO:"Healthcare / Bio",
      BSX:"Healthcare / Bio", MPW:"Healthcare / Bio",

      AAPL:"Consumer / Brand", ABNB:"Consumer / Brand",
      CELH:"Consumer / Brand", DIS:"Consumer / Brand",
      NFLX:"Consumer / Brand", PEP:"Consumer / Brand",
      SBUX:"Consumer / Brand", WMT:"Consumer / Brand",
      SPOT:"Consumer / Brand", KO:"Consumer / Brand",
      COST:"Consumer / Brand", RBLX:"Consumer / Brand",
      GME:"Consumer / Brand", ZM:"Consumer / Brand",

      CAT:"Industrial / Infra", DE:"Industrial / Infra",
      STLD:"Industrial / Infra", VMC:"Industrial / Infra",
      MP:"Industrial / Infra", OTTR:"Industrial / Infra",
      STRL:"Industrial / Infra", KTOS:"Industrial / Infra",
      LMT:"Industrial / Infra", GE:"Industrial / Infra",
      PH:"Industrial / Infra", TDY:"Industrial / Infra",
      IESC:"Industrial / Infra", GEL:"Industrial / Infra",
      ETRN:"Industrial / Infra", CLS:"Industrial / Infra"
    };

    // ---------- 회사 설명 (요약형) ----------
    const companyProfiles = {
      AAPL: "아이폰·맥·아이패드·워치와 iOS·서비스 구독으로 잠금효과가 강한 빅테크. 하드웨어+서비스 결합으로 꾸준한 현금창출.",
      ABNB: "숙박·체험 공유 플랫폼. 자산을 직접 보유하지 않고 수수료를 취하는 마켓플레이스 구조.",
      ADBE: "포토샵·프리미어·애크로뱃 등 크리에이티브/문서 소프트웨어를 구독형 SaaS로 전환한 고마진 기업.",
      AG: "은(실버) 중심의 귀금속 채굴사. 금·은 가격에 레버리지된 플레이로 변동성이 크다.",
      AGX: "발전소·인프라 EPC를 수행하는 엔지니어링 회사. 전력·산업 프로젝트 사이클에 연동.",
      ALAB: "데이터센터용 CXL·PCIe·액티브 케이블 등 고속 인터커넥트 팹리스. AI 서버 I/O 병목 해소에 초점.",
      ALL: "자동차·주택·생명보험 등 손해보험 포트폴리오를 가진 대형 보험사.",
      AMAT: "웨이퍼 공정 장비 중심의 종합 반도체 장비사. 메모리·파운드리·로직 전반에 공급.",
      AMGN: "바이오의약품 기반 빅파마. 항체·재조합 단백을 중심으로 포트폴리오 운영.",
      AMZN: "이커머스+프라임 생태계와 AWS 클라우드로 성장하는 빅테크. 데이터센터 인프라의 핵심プレ이어.",
      ANET: "클라우드/AI 데이터센터 스위치에 집중한 네트워킹 업체. 소프트웨어 정의 네트워크로 차별화.",
      ANSS: "CAE(해석) 소프트웨어 리더. 자동차·우주·반도체 등 복잡한 제품 설계에 필수 툴.",
      APP: "모바일 광고·측정·수익화 플랫폼. 퍼포먼스 광고와 게임 퍼블리싱을 병행.",
      ARM: "저전력 CPU 아키텍처 IP를 라이선스. 모바일에서 서버·AI 가속기로 확장 중.",
      ASML: "EUV/DUV 노광장비를 사실상 독점 공급. 첨단 반도체 공정의 병목 포인트.",
      AVGO: "Broadcom – 네트워크·스토리지·무선·AI 칩과 인프라 소프트웨어를 가진 복합 반도체/소프트웨어 기업.",

      BE: "고체산화물 연료전지(SOFC)를 활용한 분산 전력 솔루션. 데이터센터·상업시설용 친환경 전력원 지향.",
      BK: "수탁·자산관리 특화 금융사. 거래/보관 인프라 역할로 금융 시스템의 필수 요소.",
      BLK: "세계 최대 자산운용사. ETF·인덱스·액티브 운용으로 글로벌 자산에 레버리지.",
      BMNR: "침지식 냉각 기반 암호화폐 채굴 인프라. 효율과 전력비 절감에 초점을 둠.",
      BSX: "심혈관·신경계·비뇨기 등 의료기기에 강점. 고령화와 맞물린 구조적 성장 산업.",
      BTDR: "Bitdeer – 비트코인 채굴·클라우드 마이닝·호스팅을 제공하는 채굴 인프라 플레이.",

      CAT: "건설·광산·에너지용 중장비 대표 업체. 인프라·자원 사이클에 연동.",
      CDNS: "Cadence – 반도체 설계 자동화(EDA)와 IP를 제공하는 필수 툴 벤더.",
      CDNA: "장기이식 환자 모니터링용 진단 테스트. 이식 후 거부반응 관리에 집중.",
      CEG: "원자력·천연가스를 포함한 발전 포트폴리오. 전력 시장 구조 변화의 수혜주.",
      CELH: "기능성 에너지 드링크 브랜드. 건강 이미지와 강한 브랜드로 고성장.",
      CL: "치약·비누·세제 등 필수 소비재 브랜드. 방어적 성격의 글로벌 소비재.",
      CLSK: "비트코인 채굴 + 에너지 효율/재생에너지 스토리 결합.",
      CLS: "Celestica – 서버·네트워크·산업·에너지 장비 생산을 맡는 EMS/ODM. AI 서버 공급망의 일부.",
      COHR: "레이저·광학·포토닉스 기업. 통신·디스플레이·반도체·방산 등 광범위한 수요.",
      COIN: "미국 대표 암호화폐 거래소. 리테일/기관 수수료와 스테이킹/커스터디 수익.",
      COST: "멤버십 기반 창고형 할인점. 가격 경쟁력과 충성 고객으로 꾸준한 성장.",
      CRDO: "100G~1.6T 액티브 전기 케이블(AEC)·고속 SerDes 팹리스. AI 데이터센터 내부 배선에 필수.",
      CRM: "Salesforce – 클라우드 기반 CRM·세일즈·마케팅 SaaS. 기업 데이터 허브 역할.",
      CSCO: "엔터프라이즈/서비스프로바이더 네트워크 장비 대장. 라우터·스위치·보안/협업 솔루션.",
      C3AI: "엔터프라이즈용 도메인 특화 AI 애플리케이션과 플랫폼을 제공.",
      CRS: "고성능 합금 소재 제조사. 항공·에너지·산업용으로 공급.",

      DASH: "음식 배달·라스트 마일 로지스틱스 플랫폼. 도시 단위 배송 인프라.",
      DDOG: "클라우드 관측성(Observability) 플랫폼. 로그·APM·보안·인프라 모니터링 통합.",
      DE: "농기계·건설 장비 대장. 정밀 농업 장비로 데이터 기반 농업에 노출.",
      DLR: "하이퍼스케일·콜로케이션 데이터센터 리츠. 클라우드/AIs 서버 인프라 수혜.",
      DHI: "미국 대형 주택 건설사. 주택 수요와 금리 사이클에 연동.",
      DIS: "디즈니 – 콘텐츠·IP·테마파크·스트리밍(Disney+)을 가진 엔터테인먼트 그룹.",

      ETN: "전력 관리·배전·산업용 전기 장비 글로벌 플레이어.",
      ETOR: "eToro – 주식·암호화폐·CFD 등 멀티자산 소셜 트레이딩 플랫폼.",
      ETRN: "천연가스 미드스트림 기업. 파이프라인·저장 인프라 운영.",
      EW: "심장판막·중환자 모니터링 기기 전문. 구조적 성장 산업.",
      EXAS: "대장암 등 암 조기 진단 테스트. 비침습 진단 수혜.",
      EQIX: "Equinix – 글로벌 데이터센터 리츠. 클라우드 허브·인터커넥트 역할.",

      FABR: "광통신·레이저 모듈 등 정밀 제조에 특화된 EMS/ODM.",
      FSLR: "박막형 태양광 모듈과 발전 프로젝트. 유틸리티급 태양광에 집중.",
      FUTU: "홍콩/중국 기반 온라인 브로커. Moomoo 등 앱으로 개인투자자 대상.",

      GE: "GE Aerospace – 항공기 엔진 제작/정비 비즈니스 중심.",
      GEL: "중간재·파이프라인·터미널 등 에너지 인프라 운영.",
      GEN: "Generac – 가정/상업용 비상 발전기 및 분산 에너지 솔루션.",
      GME: "게임 리테일 체인. 밈 주식으로 유명하지만 본업은 점포 기반 판매.",
      GOOGL: "검색·유튜브·안드로이드·GCP를 보유한 빅테크. 광고와 클라우드, AI 인프라 중심.",
      GCM: "Genius Sports – 스포츠 데이터·미디어·베팅 기술 제공 업체.",

      HPE: "서버·스토리지·네트워크·서비스를 제공하는 엔터프라이즈 IT 인프라 업체.",
      HUT: "북미 비트코인 채굴 및 데이터센터 인프라 운영.",

      IBM: "레거시 IT·컨설팅·하이브리드 클라우드·AI를 결합한 전통 IT 대형사.",
      IESC: "전기·통신·기계 설비 공사와 유지보수 수행.",
      INTC: "CPU·칩셋·파운드리 사업을 하는 종합 반도체 기업.",
      IONQ: "이온트랩 기반 양자컴퓨터 하드웨어·클라우드 서비스.",
      ISRG: "다빈치 수술 로봇으로 독점적 지위. 로봇 수술 보급 수혜.",
      ITRI: "스마트 미터·그리드 관리 솔루션. 전력·수도 인프라에 필수.",
      IVZ: "ETF·펀드를 운용하는 자산운용사.",

      JBL: "다양한 산업 전자제품을 제조하는 글로벌 EMS 업체.",
      JNPR: "Juniper – 라우터·스위치·보안 솔루션 네트워킹 기업.",

      KO: "코카콜라 – 탄산음료·주스·차 등 글로벌 음료 브랜드.",
      KTOS: "무인기·미사일 표적·위성통신 등 방산/국방 특화.",

      LLY: "당뇨·비만·면역질환 등에서 혁신약을 보유한 빅파마.",
      LMT: "전투기·미사일·우주 시스템 등 방산 대장.",
      LRCX: "식각·증착 등 웨이퍼 공정 장비. 선단 공정 CAPEX에 레버리지.",
      LOW: "미국 홈리모델링·자재 유통 업체. 주택 수리/DIY 수요에 연동.",

      MARA: "대형 비트코인 채굴사. 해시레이트와 비트코인 가격에 높은 레버리지.",
      MCHP: "MCU·아날로그·혼합신호 반도체를 공급하는 팹리스/IDM.",
      META: "페이스북·인스타그램·와츠앱·리얼스를 보유한 광고/소셜 플랫폼.",
      MNTK: "바이오가스·RNG 등 재생 천연가스 생산.",
      MRNA: "mRNA 백신·치료제 플랫폼. 코로나 이후 파이프라인 확장 중.",
      MRVL: "데이터센터·5G·스토리지·자동차용 고속 SoC를 설계.",
      MP: "미국 내 희토류 광산·정제. 공급망 안보 테마.",
      MU: "DRAM·NAND·HBM 등 메모리 반도체 공급.",
      MSFT: "윈도우·오피스·애저·GitHub·LinkedIn 등 포트폴리오. Copilot·AI 인프라가 성장 축.",
      MPW: "병원·의료시설 리츠. 금리와 헬스케어 임대 수요에 연동.",

      NET: "Cloudflare – CDN·보안·엣지·서버리스 플랫폼. 인터넷 인프라의 엣지 계층.",
      NEE: "재생에너지 발전·유틸리티 대장. 풍력/태양광 자산 대규모 보유.",
      NFLX: "스트리밍 구독 서비스. 오리지널 콘텐츠와 글로벌 확대가 핵심.",
      NIO: "중국 전기차 브랜드. 교환식 배터리 스테이션 등 인프라 차별화.",
      NRIX: "단백질 분해 기반 항암제 개발 바이오텍.",
      NOW: "ServiceNow – IT/업무 워크플로우 자동화 SaaS. 디지털 트랜스포메이션 수혜.",
      NU: "브라질·라틴아메리카 디지털 은행/핀테크.",
      NVDA: "GPU·AI 가속기·네트워킹·소프트웨어 스택까지 갖춘 AI 인프라 핵심 기업.",
      NUE: "전기로 기반 철강 생산사. 북미 건설·제조 수요에 레버리지.",

      OKLO: "데이터센터·원격지역용 소형 원자로/마이크로 원자로 개발사.",
      ORCL: "데이터베이스·ERP·클라우드 인프라 공급. 레거시 워크로드에 강점.",
      OTTR: "전력·제조·인프라를 결합한 지역 유틸리티/산업 회사.",

      PAGS: "브라질 결제·핀테크 플랫폼. 상점·소비자 결제에 노출.",
      PANW: "Palo Alto – 네트워크/클라우드/엔드포인트 보안 플랫폼 대장.",
      PATH: "UiPath – RPA(로봇 프로세스 자동화) 소프트웨어.",
      PEP: "PepsiCo – 음료·스낵 포트폴리오를 가진 글로벌 소비재.",
      PH: "Parker-Hannifin – 유압·공압·모션컨트롤 등 산업 부품 공급.",
      PLTR: "Palantir – 데이터 통합·분석·AI 플랫폼. 정부·국방·엔터프라이즈 고객 비중 높음.",
      PNW: "Pinnacle West – 아리조나 지역 전력 유틸리티.",
      PYPL: "PayPal – 온라인 결제·Venmo 등 디지털 지갑 서비스.",

      QCOM: "Qualcomm – 모바일 SoC·모뎀과 특허 라이선스 사업.",
      QSR: "Burger King·Tim Hortons·Popeyes 등을 보유한 QSR 프랜차이즈 그룹.",

      RBLX: "Roblox – UGC 기반 게임/메타버스 플랫폼.",
      RDFN: "온라인 부동산 중개/플랫폼. 커미션 기반 비즈니스 모델.",
      RIOT: "Riot – 대형 비트코인 채굴사. 해시레이트와 BTC 가격에 레버리지.",

      SBUX: "Starbucks – 글로벌 커피 체인. 브랜드·매장 경험 강점.",
      SMCI: "Supermicro – AI 서버·랙 솔루션 ODM/OEM. NVIDIA 등과 긴밀한 생태계.",
      SMR: "NuScale – 소형 모듈형 원자로(SMR) 설계·인허가 단계.",
      SITM: "SiTime – MEMS 타이밍/클럭 칩 팹리스. 전통 쿼츠 대비 성능·유연성이 강점.",
      SHOP: "Shopify – 온라인 상점 구축·결제·물류를 제공하는 커머스 플랫폼.",
      SNOW: "Snowflake – 클라우드 기반 데이터 웨어하우스·데이터 클라우드.",
      SOFI: "SoFi – 디지털 은행·대출·투자·카드 등 올인원 핀테크.",
      SPOT: "Spotify – 음악/팟캐스트 스트리밍 플랫폼.",
      SQ: "Block – 소상공인 결제 단말기와 Cash App·비트코인을 아우르는 핀테크.",
      STLD: "전자 아크로 전기로 기반 철강사. 효율적인 생산 구조.",
      STRL: "교통·공공 인프라 건설·엔지니어링 회사.",
      STX: "Seagate – HDD·스토리지 솔루션 제조.",
      SWKS: "Skyworks – 스마트폰·통신용 RF 프론트엔드 칩.",

      TDY: "Teledyne – 센서·이미징·계측·우주/방산용 전자 장비.",
      TEAM: "Atlassian – Jira·Confluence 등 협업·이슈 추적 SaaS.",
      TEVA: "제네릭 의약품·일부 브랜드 약을 보유한 제약사.",
      TMO: "Thermo Fisher – 연구 장비·시약·분석 장비를 제공하는 생명과학 인프라.",
      TSLA: "Tesla – 전기차·배터리·에너지 저장·자율주행 소프트웨어.",
      TSM: "TSMC – 세계 최대 파운드리. 첨단 공정의 핵심.",
      TTM: "TTM Technologies – PCB 및 관련 솔루션 공급.",
      TWLO: "Twilio – 메시지·전화·영상·인증 등 통신 API 플랫폼.",

      UBER: "Uber – 라이드 헤일링·배달·물류를 운영하는 모빌리티 플랫폼.",
      UPST: "Upstart – AI 기반 신용평가로 대출을 중개하는 핀테크.",

      VCYT: "Veracyte – 암 진단 등 분자병리 테스트 회사.",
      VMC: "Vulcan – 골재·아스팔트·콘크리트 등 건설 자재 생산.",
      VRTX: "Vertex – 낭포성 섬유증 등 희귀질환 치료제 강점.",
      VRT: "Vertiv – 데이터센터·통신시설용 전력·쿨링·랙 인프라 솔루션.",
      VZ: "Verizon – 미국 통신 캐리어. 무선·유선 통신 서비스.",

      WDC: "Western Digital – HDD·SSD 스토리지 솔루션.",
      WMT: "Walmart – 세계 최대 오프라인/온라인 리테일러.",
      WTW: "Willis Towers Watson – 보험·리스크·인사 컨설팅/브로커.",

      ZI: "ZoomInfo – B2B 세일즈·마케팅용 기업/연락처 데이터 플랫폼.",
      ZBRA: "Zebra – 바코드·RFID·모바일 단말 등 현장 데이터 수집 장비.",
      ZM: "Zoom – 화상회의·협업 플랫폼."
    };

    const stakingManual = [
      { asset: "AVAX", platform: "Bybit Earn",      apy: 7.5, note: "30d Lock" },
      { asset: "SUI",  platform: "On-chain Staking", apy: 6.2, note: "Validator" },
      { asset: "APT",  platform: "On-chain Staking", apy: 7.0, note: "Est." }
    ];

    let usdKrwRate = null;
    let quoteCache = {};

    function formatNumber(n, decimals = 2) {
      if (n === null || n === undefined || isNaN(n)) return "–";
      return Number(n).toLocaleString("en-US", {
        minimumFractionDigits: decimals,
        maximumFractionDigits: decimals
      });
    }

    function setLastUpdated() {
      const el = document.getElementById("last-updated");
      const now = new Date();
      const pad = (x) => String(x).padStart(2, "0");
      el.textContent =
        `Last update ${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())} `
        + `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
    }

    // ---------- Equities 테이블 ----------
    function renderStocksTableSkeleton() {
      const container = document.getElementById("stocks-container");
      if (!container) return;

      const groups = {};
      for (const s of stocks) {
        const sector = sectorTag[s.symbol] || "Other / Unclassified";
        if (!groups[sector]) groups[sector] = [];
        groups[sector].push(s);
      }
      const sectorNames = Object.keys(groups).sort();

      const html = sectorNames.map((sector) => {
        const rows = groups[sector]
          .sort((a, b) => a.symbol.localeCompare(b.symbol))
          .map((s) => `
            <tr class="clickable-row" data-symbol="${s.symbol}">
              <td>${s.symbol}</td>
              <td>${s.name}</td>
              <td id="price-${s.symbol}" class="muted">…</td>
              <td id="chg-${s.symbol}" class="muted">…</td>
              <td id="chgPct-${s.symbol}" class="muted">…</td>
            </tr>
          `).join("");
        return `
          <div class="sector-block">
            <div class="sector-title">${sector}</div>
            <table>
              <thead>
                <tr>
                  <th data-col="symbol" class="sortable">Symbol</th>
                  <th data-col="name">Name</th>
                  <th data-col="price" class="sortable">Price (USD)</th>
                  <th data-col="change" class="sortable">Change</th>
                  <th data-col="changePct" class="sortable">Δ%</th>
                </tr>
              </thead>
              <tbody>
                ${rows}
              </tbody>
            </table>
          </div>
        `;
      }).join("");

      container.innerHTML = html;

      // 행 클릭 이벤트
      document
        .querySelectorAll("#stocks-container .clickable-row")
        .forEach((row) => {
          row.addEventListener("click", () => {
            const sym = row.getAttribute("data-symbol");
            showInlineInsight(row, sym);
          });
        });

      // 헤더 정렬 이벤트
      attachSortingHandlers();
    }

    function attachSortingHandlers() {
      const sectorBlocks = document.querySelectorAll("#stocks-container .sector-block");
      sectorBlocks.forEach((block) => {
        const table = block.querySelector("table");
        const tbody = table.querySelector("tbody");
        const headers = table.querySelectorAll("th");

        headers.forEach((th, idx) => {
          const col = th.getAttribute("data-col");
          if (!col || (col !== "price" && col !== "change" && col !== "changePct" && col !== "symbol" && col !== "name")) {
            return;
          }
          th.classList.add("sortable");
          th.addEventListener("click", () => {
            const currentDir = th.getAttribute("data-sort-dir") || "none";
            const newDir = currentDir === "asc" ? "desc" : "asc";
            headers.forEach(h => h.removeAttribute("data-sort-dir"));
            th.setAttribute("data-sort-dir", newDir);

            const rows = Array.from(tbody.querySelectorAll("tr"))
              .filter(r => !r.classList.contains("insight-row"));

            rows.sort((a, b) => {
              const aText = a.children[idx].innerText.replace(/,/g,"");
              const bText = b.children[idx].innerText.replace(/,/g,"");
              let comp = 0;
              if (col === "symbol" || col === "name") {
                comp = aText.localeCompare(bText);
              } else {
                const aVal = parseFloat(aText);
                const bVal = parseFloat(bText);
                if (isNaN(aVal) && isNaN(bVal)) comp = 0;
                else if (isNaN(aVal)) comp = 1;
                else if (isNaN(bVal)) comp = -1;
                else comp = aVal - bVal;
              }
              return newDir === "asc" ? comp : -comp;
            });

            rows.forEach(r => tbody.appendChild(r));
          });
        });
      });
    }

    async function loadQuote(symbol, force=false) {
      if (!force && quoteCache[symbol]) {
        applyQuoteToRow(symbol, quoteCache[symbol]);
        return;
      }

      const priceEl = document.getElementById(`price-${symbol}`);
      const chgEl = document.getElementById(`chg-${symbol}`);
      const chgPctEl = document.getElementById(`chgPct-${symbol}`);
      if (!priceEl || !chgEl || !chgPctEl) return;

      priceEl.textContent = "…";
      chgEl.textContent = "…";
      chgPctEl.textContent = "…";

      try {
        const url =
          `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${encodeURIComponent(symbol)}&apikey=${ALPHAVANTAGE_KEY}`;
        const res = await fetch(url);
        const data = await res.json();
        const q = data["Global Quote"];
        if (!q) {
          priceEl.textContent = "No data";
          chgEl.textContent = "API";
          chgPctEl.textContent = "limit";
          chgEl.className = "muted";
          chgPctEl.className = "muted";
          return;
        }
        const quote = {
          price: parseFloat(q["05. price"]),
          change: parseFloat(q["09. change"]),
          changePct: parseFloat((q["10. change percent"] || "").replace("%",""))
        };
        quoteCache[symbol] = quote;
        applyQuoteToRow(symbol, quote);
      } catch (e) {
        console.error(e);
        priceEl.textContent = "Error";
        chgEl.textContent = "–";
        chgPctEl.textContent = "–";
        chgEl.className = "muted";
        chgPctEl.className = "muted";
      }
    }

    async function loadAllQuotes() {
      quoteCache = {};
      for (const s of stocks) {
        // Alpha Vantage 무료키는 분당 5회 제한이라 실제로는 레이트 리밋이 걸릴 수 있음.
        // 구조 상은 "한 번에 쫙" 불러오도록 설계.
        // 필요하면 여기서 setTimeout으로 속도 조절 가능.
        await loadQuote(s.symbol, true);
      }
    }

    function applyQuoteToRow(symbol, quote) {
      const priceEl = document.getElementById(`price-${symbol}`);
      const chgEl = document.getElementById(`chg-${symbol}`);
      const chgPctEl = document.getElementById(`chgPct-${symbol}`);
      if (!priceEl || !chgEl || !chgPctEl) return;

      const cls =
        quote.change > 0 ? "positive" :
        quote.change < 0 ? "negative" : "muted";

      priceEl.textContent = formatNumber(quote.price, 2);
      chgEl.textContent = formatNumber(quote.change, 2);
      chgPctEl.textContent =
        isNaN(quote.changePct)
          ? "–"
          : `${quote.changePct > 0 ? "+" : ""}${quote.changePct.toFixed(2)}%`;
      chgEl.className = cls;
      chgPctEl.className = cls;
      priceEl.className = "";
    }

    function showInlineInsight(row, symbol) {
      const next = row.nextElementSibling;
      const hasCurrent = next && next.classList.contains("insight-row");
      const isSame = hasCurrent && next.getAttribute("data-symbol") === symbol;

      // 현재 열려있는 인사이트 전부 제거
      document
        .querySelectorAll("#stocks-container .insight-row")
        .forEach((r) => r.remove());

      // 같은 행을 다시 클릭한 경우 → 접기만 하고 끝
      if (isSame) return;

      const info = stocks.find(s => s.symbol === symbol);
      const sector = sectorTag[symbol] || "Other / Unclassified";
      if (!info) return;

      const profile = companyProfiles[symbol] || "이 종목에 대한 요약이 아직 정리되지 않았습니다.";

      const tr = document.createElement("tr");
      tr.className = "insight-row";
      tr.setAttribute("data-symbol", symbol);
      const td = document.createElement("td");
      td.colSpan = 5;

      const containerId = `tv-chart-${symbol}`;

      td.innerHTML = `
        <div class="insight-box">
          <strong>${symbol}</strong> · ${info.name}<br/>
          <span class="muted">Sector group: ${sector}</span>
          <p style="margin-top:6px;">${profile}</p>
          <div style="margin-top:8px; height:260px;">
            <div id="${containerId}" style="width:100%; height:100%;"></div>
          </div>
        </div>
      `;
      tr.appendChild(td);

      const parent = row.parentNode;
      if (row.nextSibling) parent.insertBefore(tr, row.nextSibling);
      else parent.appendChild(tr);

      if (window.TradingView) {
        new TradingView.widget({
          container_id: containerId,
          symbol: symbol,
          interval: "60",
          timezone: "Etc/UTC",
          theme: "light",
          style: "1",
          height: "100%",
          width: "100%",
          hide_top_toolbar: false,
          hide_legend: false,
          withdateranges: true,
          locale: "en"
        });
      }
    }

    // ---------- FX ----------
    async function fetchFX() {
      const tbody = document.querySelector("#fx-table tbody");
      if (!tbody) return;
      tbody.innerHTML = `<tr><td colspan="4" class="muted">Loading…</td></tr>`;

      const symbols = ["USD","EUR","CHF","JPY","CNY"];
      try {
        const res = await fetch("https://open.er-api.com/v6/latest/KRW");
        if (!res.ok) throw new Error("FX HTTP error");
        const data = await res.json();
        const rates = data.rates || {};

        const rows = symbols.map((sym) => {
          const v = rates[sym];
          if (!v) {
            return `<tr>
              <td>${sym}/KRW</td>
              <td class="muted">–</td>
              <td class="muted">–</td>
              <td class="muted">–</td>
            </tr>`;
          }
          // base = KRW, rates[sym] = 1 KRW 대비 sym
          // 1 sym = ? KRW => 1 / (1 KRW in sym)
          const rate = 1 / v;
          if (sym === "USD") usdKrwRate = rate;

          return `<tr>
            <td>${sym}/KRW</td>
            <td>${formatNumber(rate, sym === "JPY" ? 3 : 2)}</td>
            <td class="muted">–</td>
            <td class="muted">–</td>
          </tr>`;
        }).join("");

        tbody.innerHTML = rows;
      } catch (e) {
        console.error("FX error", e);
        tbody.innerHTML = `<tr><td colspan="4" class="muted">Error</td></tr>`;
      }
    }

    // ---------- Crypto ----------
    async function fetchCryptos() {
      const tbody = document.querySelector("#crypto-table tbody");
      if (!tbody) return;
      tbody.innerHTML = `<tr><td colspan="6" class="muted">Loading…</td></tr>`;

      try {
        const url =
          "https://api.coingecko.com/api/v3/coins/markets" +
          "?vs_currency=usd&order=market_cap_desc&per_page=15&page=1&sparkline=false&price_change_percentage=24h";
        const res = await fetch(url);
        if (!res.ok) throw new Error("crypto HTTP error");
        const data = await res.json();

        const rows = data.map((c) => {
          const usd = c.current_price;
          const krw = usdKrwRate ? usd * usdKrwRate : null;
          const chg = c.price_change_percentage_24h;
          const vol = c.total_volume;
          const cls =
            chg > 0 ? "positive" : chg < 0 ? "negative" : "muted";
          const pctText =
            chg === null || chg === undefined || isNaN(chg)
              ? "–"
              : `${chg > 0 ? "+" : ""}${chg.toFixed(2)}%`;

          return `
            <tr>
              <td>${(c.symbol || "").toUpperCase()}</td>
              <td>${c.name}</td>
              <td>${formatNumber(usd, 2)}</td>
              <td>${formatNumber(krw, 0)}</td>
              <td class="${cls}">${pctText}</td>
              <td>${formatNumber(vol, 0)}</td>
            </tr>
          `;
        }).join("");

        tbody.innerHTML = rows;
      } catch (e) {
        console.error("crypto error", e);
        tbody.innerHTML = `<tr><td colspan="6" class="muted">Error</td></tr>`;
      }
    }

    // ---------- Staking ----------
    function renderStakingManual() {
      const tbody = document.querySelector("#staking-table tbody");
      if (!tbody) return;
      const rows = stakingManual.map((s) => `
        <tr>
          <td>${s.asset}</td>
          <td>${s.platform}</td>
          <td>${s.apy.toFixed(2)}%</td>
          <td>${s.note}</td>
        </tr>
      `).join("");
      tbody.innerHTML = rows;
    }

    async function refreshAll() {
      setLastUpdated();
      renderStakingManual();
      await fetchFX();
      await fetchCryptos();
      await loadAllQuotes(); // 전 종목 가격 한 번에 로딩 시도
    }

    document
      .getElementById("manual-refresh")
      .addEventListener("click", () => {
        refreshAll();
      });

    // 초기 렌더
    renderStocksTableSkeleton();
    refreshAll();
  </script>
</body>
</html>
