<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Material Studio Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- TradingView 차트 위젯 -->
  <script src="https://s3.tradingview.com/tv.js"></script>
  <style>
    :root {
      --bg: #f5f5f5;
      --card-bg: #ffffff;
      --text-main: #111827;
      --text-sub: #6b7280;
      --line: #e5e7eb;
      --accent: #111827;
      --positive: #16a34a;
      --negative: #dc2626;
    }
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
    }
    body {
      margin: 0;
      padding: 32px 24px 40px;
      background: var(--bg);
      color: var(--text-main);
    }
    .page {
      max-width: 1200px;
      margin: 0 auto;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      gap: 24px;
      margin-bottom: 32px;
      border-bottom: 1px solid var(--line);
      padding-bottom: 16px;
    }
    .title-block h1 {
      margin: 0 0 4px;
      font-weight: 700;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      font-size: 18px;
    }
    .title-block .sub {
      font-size: 12px;
      color: var(--text-sub);
      letter-spacing: 0.16em;
      text-transform: uppercase;
      font-weight: 600;
    }
    .meta {
      text-align: right;
      font-size: 11px;
      color: var(--text-sub);
      line-height: 1.5;
    }
    .controls {
      margin-top: 6px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 8px;
    }
    .controls button {
      border-radius: 999px;
      border: 1px solid var(--text-main);
      background: var(--text-main);
      color: white;
      font-size: 11px;
      padding: 5px 12px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      cursor: pointer;
    }
    .controls button:hover {
      opacity: 0.9;
    }
    main {
      display: grid;
      grid-template-columns: 3fr 2fr;
      gap: 16px;
    }
    @media (max-width: 900px) {
      main {
        grid-template-columns: 1fr;
      }
      header {
        flex-direction: column;
        align-items: stretch;
      }
      .meta {
        text-align: left;
      }
    }
    section.card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 16px 18px 14px;
      border: 1px solid var(--line);
    }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-bottom: 10px;
    }
    .card-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      font-weight: 800;
    }
    .card-sub {
      font-size: 11px;
      color: var(--text-sub);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 600;
    }
    .tag {
      font-size: 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      padding: 3px 8px;
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      white-space: nowrap;
      font-weight: 600;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }
    th, td {
      padding: 6px 4px;
      border-bottom: 1px solid #f3f4f6;
      text-align: right;
      white-space: nowrap;
    }
    th:first-child,
    td:first-child {
      text-align: left;
    }
    th {
      font-weight: 800;
      color: var(--text-sub);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      cursor: pointer;
    }
    th.sortable::after {
      content: " ";
      display: inline-block;
      margin-left: 4px;
      border: 4px solid transparent;
      border-top-color: #cbd5f5;
      transform: translateY(2px);
    }
    th[data-sort-dir="asc"].sortable::after {
      border-top-color: #111827;
      transform: rotate(180deg) translateY(-2px);
    }
    th[data-sort-dir="desc"].sortable::after {
      border-top-color: #111827;
    }
    tbody tr:last-child td {
      border-bottom: none;
    }
    .muted { color: var(--text-sub); }
    .positive { color: var(--positive); font-weight: 600; }
    .negative { color: var(--negative); font-weight: 600; }
    .clickable-row { cursor: pointer; }
    .clickable-row:hover { background: #f9fafb; }
    .small-note {
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-sub);
    }
    .sector-block {
      margin-top: 10px;
      border-top: 1px solid #e5e7eb;
      padding-top: 8px;
    }
    .sector-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-sub);
      margin-bottom: 4px;
      font-weight: 800;
    }
    .insight-box {
      font-size: 12px;
      line-height: 1.6;
      padding: 10px 8px 6px;
      background: #f9fafb;
      border-radius: 8px;
    }
    .news-title {
      margin-top: 10px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-sub);
      font-weight: 700;
    }
    .news-list {
      margin: 4px 0 0;
      padding-left: 16px;
      max-height: 120px;
      overflow-y: auto;
    }
    .news-list li {
      font-size: 11px;
      margin-bottom: 4px;
    }
    .news-list a {
      color: var(--text-main);
      text-decoration: none;
    }
    .news-list a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="title-block">
        <h1>MATERIAL STUDIO PORTFOLIO</h1>
        <div class="sub">EQUITIES · CRYPTO · FX · YIELD</div>
      </div>
      <div class="meta">
        <div id="last-updated">Last update – –</div>
        <div class="controls">
          <button id="manual-refresh">REFRESH</button>
        </div>
      </div>
    </header>

    <main>
      <!-- 왼쪽: Equities -->
      <div class="left-column">
        <section class="card" id="equities">
          <div class="card-header">
            <div>
              <div class="card-title">Equities</div>
              <div class="card-sub">AI · Data Center · Ecosystem</div>
            </div>
            <div class="tag">Polygon · TradingView · Finnhub</div>
          </div>
          <div id="stocks-container"></div>
          <div class="small-note">
            * 페이지 로딩/REFRESH 시 전 종목 가격을 Polygon으로 한 번에 불러옵니다.<br>
            행을 클릭하면 Company Insight + 실시간 차트 + 최신 뉴스가 펼쳐지고, 다시 클릭하면 접힙니다.<br>
            섹터별 테이블에서 Symbol / Price / Change / Δ% 헤더를 클릭하면 오름차순·내림차순 정렬이 됩니다.
          </div>
        </section>
      </div>

      <!-- 오른쪽: FX + Crypto + Staking -->
      <div class="right-column">
        <section class="card" id="fx">
          <div class="card-header">
            <div>
              <div class="card-title">FX</div>
              <div class="card-sub">KRW base · Major pairs</div>
            </div>
            <div class="tag">exchangerate.host</div>
          </div>
          <table id="fx-table">
            <thead>
              <tr>
                <th>Pair</th>
                <th>Rate</th>
                <th>Δ</th>
                <th>Δ%</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </section>

        <section class="card" id="crypto">
          <div class="card-header">
            <div>
              <div class="card-title">Crypto Market</div>
              <div class="card-sub">Top 15 · Market Cap · Volume</div>
            </div>
            <div class="tag">CoinGecko</div>
          </div>
          <table id="crypto-table">
            <thead>
              <tr>
                <th>Symbol</th>
                <th>Name</th>
                <th>USD</th>
                <th>KRW</th>
                <th>24h</th>
                <th>Vol 24h (USD)</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </section>

        <section class="card" id="yield">
          <div class="card-header">
            <div>
              <div class="card-title">Staking Yield</div>
              <div class="card-sub">Manual Snapshot · APY</div>
            </div>
            <div class="tag">On-chain / CeFi</div>
          </div>
          <table id="staking-table">
            <thead>
              <tr>
                <th>Asset</th>
                <th>Platform</th>
                <th>APY</th>
                <th>Note</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="small-note">
            지금은 수동 입력 값입니다. 나중에 DeFi API로 연결 가능.
          </div>
        </section>
      </div>
    </main>
  </div>

  <script>
    // ---------- API Keys ----------
    const POLYGON_KEY = "0iKefMr7YqIw6uf_JpP2ZOrshixFvBK4";
    const FINNHUB_KEY = "d4ph189r01qjpnav88m0d4ph189r01qjpnav88mg";

    // ---------- 종목 리스트 ----------
    const stocks = [
      { symbol: "AAPL",  name: "Apple" },
      { symbol: "ABNB",  name: "Airbnb" },
      { symbol: "ADBE",  name: "Adobe" },
      { symbol: "AG",    name: "First Majestic Silver" },
      { symbol: "AGX",   name: "Argan" },
      { symbol: "ALAB",  name: "Astera Labs" },
      { symbol: "ALL",   name: "Allstate" },
      { symbol: "AMAT",  name: "Applied Materials" },
      { symbol: "AMGN",  name: "Amgen" },
      { symbol: "AMZN",  name: "Amazon" },
      { symbol: "ANET",  name: "Arista Networks" },
      { symbol: "ANSS",  name: "Ansys" },
      { symbol: "APP",   name: "AppLovin" },
      { symbol: "ARM",   name: "Arm Holdings" },
      { symbol: "ASML",  name: "ASML" },
      { symbol: "AVGO",  name: "Broadcom" },

      { symbol: "BE",    name: "Bloom Energy" },
      { symbol: "BK",    name: "Bank of New York Mellon" },
      { symbol: "BLK",   name: "BlackRock" },
      { symbol: "BMNR",  name: "BitMine Immersion Technologies" },
      { symbol: "BSX",   name: "Boston Scientific" },
      { symbol: "BTDR",  name: "Bitdeer Technologies" },

      { symbol: "CAT",   name: "Caterpillar" },
      { symbol: "CDNS",  name: "Cadence Design Systems" },
      { symbol: "CDNA",  name: "CareDx" },
      { symbol: "CEG",   name: "Constellation Energy" },
      { symbol: "CELH",  name: "Celsius Holdings" },
      { symbol: "CL",    name: "Colgate-Palmolive" },
      { symbol: "CLSK",  name: "CleanSpark" },
      { symbol: "CLS",   name: "Celestica" },
      { symbol: "COHR",  name: "Coherent" },
      { symbol: "COIN",  name: "Coinbase" },
      { symbol: "COST",  name: "Costco" },
      { symbol: "CRDO",  name: "Credo Technology" },
      { symbol: "CRM",   name: "Salesforce" },
      { symbol: "CSCO",  name: "Cisco Systems" },
      { symbol: "C3AI",  name: "C3.ai" },
      { symbol: "CRS",   name: "Carpenter Technology" },

      { symbol: "DASH",  name: "DoorDash" },
      { symbol: "DDOG",  name: "Datadog" },
      { symbol: "DE",    name: "Deere & Company" },
      { symbol: "DLR",   name: "Digital Realty Trust" },
      { symbol: "DHI",   name: "D.R. Horton" },
      { symbol: "DIS",   name: "Walt Disney" },

      { symbol: "ETN",   name: "Eaton" },
      { symbol: "ETOR",  name: "eToro Group" },
      { symbol: "ETRN",  name: "Equitrans Midstream" },
      { symbol: "EW",    name: "Edwards Lifesciences" },
      { symbol: "EXAS",  name: "Exact Sciences" },
      { symbol: "EQIX",  name: "Equinix" },

      { symbol: "FABR",  name: "Fabrinet" },
      { symbol: "FSLR",  name: "First Solar" },
      { symbol: "FUTU",  name: "Futu Holdings" },

      { symbol: "GE",    name: "GE Aerospace" },
      { symbol: "GEL",   name: "Genesis Energy" },
      { symbol: "GEN",   name: "Generac" },
      { symbol: "GME",   name: "GameStop" },
      { symbol: "GOOGL", name: "Alphabet (Google)" },
      { symbol: "GCM",   name: "Genius Sports" },

      { symbol: "HPE",   name: "Hewlett Packard Enterprise" },
      { symbol: "HUT",   name: "Hut 8 Mining" },

      { symbol: "IBM",   name: "IBM" },
      { symbol: "IESC",  name: "IES Holdings" },
      { symbol: "INTC",  name: "Intel" },
      { symbol: "IONQ",  name: "IonQ" },
      { symbol: "ISRG",  name: "Intuitive Surgical" },
      { symbol: "ITRI",  name: "Itron" },
      { symbol: "IVZ",   name: "Invesco" },

      { symbol: "JBL",   name: "Jabil" },
      { symbol: "JNPR",  name: "Juniper Networks" },

      { symbol: "KO",    name: "Coca-Cola" },
      { symbol: "KTOS",  name: "Kratos Defense" },

      { symbol: "LLY",   name: "Eli Lilly" },
      { symbol: "LMT",   name: "Lockheed Martin" },
      { symbol: "LRCX",  name: "Lam Research" },
      { symbol: "LOW",   name: "Lowe’s" },

      { symbol: "MARA",  name: "Marathon Digital" },
      { symbol: "MCHP",  name: "Microchip Technology" },
      { symbol: "META",  name: "Meta Platforms" },
      { symbol: "MNTK",  name: "Montauk Renewables" },
      { symbol: "MRNA",  name: "Moderna" },
      { symbol: "MRVL",  name: "Marvell Technology" },
      { symbol: "MP",    name: "MP Materials" },
      { symbol: "MU",    name: "Micron Technology" },
      { symbol: "MSFT",  name: "Microsoft" },
      { symbol: "MPW",   name: "Medical Properties Trust" },

      { symbol: "NET",   name: "Cloudflare" },
      { symbol: "NEE",   name: "NextEra Energy" },
      { symbol: "NFLX",  name: "Netflix" },
      { symbol: "NIO",   name: "NIO" },
      { symbol: "NRIX",  name: "Nurix Therapeutics" },
      { symbol: "NOW",   name: "ServiceNow" },
      { symbol: "NU",    name: "Nu Holdings" },
      { symbol: "NVDA",  name: "NVIDIA" },
      { symbol: "NUE",   name: "Nucor" },

      { symbol: "OKLO",  name: "Oklo" },
      { symbol: "ORCL",  name: "Oracle" },
      { symbol: "OTTR",  name: "Otter Tail" },

      { symbol: "PAGS",  name: "PagSeguro" },
      { symbol: "PANW",  name: "Palo Alto Networks" },
      { symbol: "PATH",  name: "UiPath" },
      { symbol: "PEP",   name: "PepsiCo" },
      { symbol: "PH",    name: "Parker-Hannifin" },
      { symbol: "PLTR",  name: "Palantir" },
      { symbol: "PNW",   name: "Pinnacle West" },
      { symbol: "PYPL",  name: "PayPal" },

      { symbol: "QCOM",  name: "Qualcomm" },
      { symbol: "QSR",   name: "Restaurant Brands Intl." },

      { symbol: "RBLX",  name: "Roblox" },
      { symbol: "RDFN",  name: "Redfin" },
      { symbol: "RIOT",  name: "Riot Platforms" },

      { symbol: "SBUX",  name: "Starbucks" },
      { symbol: "SMCI",  name: "Super Micro Computer" },
      { symbol: "SMR",   name: "NuScale Power" },
      { symbol: "SITM",  name: "SiTime" },
      { symbol: "SHOP",  name: "Shopify" },
      { symbol: "SNOW",  name: "Snowflake" },
      { symbol: "SOFI",  name: "SoFi" },
      { symbol: "SPOT",  name: "Spotify" },
      { symbol: "SQ",    name: "Block" },
      { symbol: "STLD",  name: "Steel Dynamics" },
      { symbol: "STRL",  name: "Sterling Infrastructure" },
      { symbol: "STX",   name: "Seagate" },
      { symbol: "SWKS",  name: "Skyworks" },

      { symbol: "TDY",   name: "Teledyne" },
      { symbol: "TEAM",  name: "Atlassian" },
      { symbol: "TEVA",  name: "Teva" },
      { symbol: "TMO",   name: "Thermo Fisher" },
      { symbol: "TSLA",  name: "Tesla" },
      { symbol: "TSM",   name: "Taiwan Semi" },
      { symbol: "TTM",   name: "TTM Technologies" },
      { symbol: "TWLO",  name: "Twilio" },

      { symbol: "UBER",  name: "Uber" },
      { symbol: "UPST",  name: "Upstart" },

      { symbol: "VCYT",  name: "Veracyte" },
      { symbol: "VMC",   name: "Vulcan Materials" },
      { symbol: "VRTX",  name: "Vertex" },
      { symbol: "VRT",   name: "Vertiv" },
      { symbol: "VZ",    name: "Verizon" },

      { symbol: "WDC",   name: "Western Digital" },
      { symbol: "WMT",   name: "Walmart" },
      { symbol: "WTW",   name: "Willis Towers Watson" },

      { symbol: "ZI",    name: "ZoomInfo" },
      { symbol: "ZBRA",  name: "Zebra" },
      { symbol: "ZM",    name: "Zoom Video" }
    ];

    // ---------- 섹터 그룹 (간단한 카테고리 묶음) ----------
    const sectorTag = {
      NVDA:"AI / Data Center Core", MSFT:"AI / Data Center Core",
      AMZN:"AI / Data Center Core", META:"AI / Data Center Core",
      GOOGL:"AI / Data Center Core", SMCI:"AI / Data Center Core",
      ANET:"AI / Data Center Core", VRT:"AI / Data Center Core",
      EQIX:"AI / Data Center Core", DLR:"AI / Data Center Core",
      NOW:"AI / Data Center Core", NET:"AI / Data Center Core",
      SNOW:"AI / Data Center Core", DDOG:"AI / Data Center Core",
      PLTR:"AI / Data Center Core", CRM:"AI / Data Center Core",

      AVGO:"Semiconductors & EDA", ASML:"Semiconductors & EDA",
      CDNS:"Semiconductors & EDA", MRVL:"Semiconductors & EDA",
      TSM:"Semiconductors & EDA", SITM:"Semiconductors & EDA",
      INTC:"Semiconductors & EDA", MU:"Semiconductors & EDA",
      AMAT:"Semiconductors & EDA", LRCX:"Semiconductors & EDA",
      MCHP:"Semiconductors & EDA", COHR:"Semiconductors & EDA",
      ARM:"Semiconductors & EDA", SWKS:"Semiconductors & EDA",

      BE:"Energy / Power / Nuclear", CEG:"Energy / Power / Nuclear",
      NEE:"Energy / Power / Nuclear", SMR:"Energy / Power / Nuclear",
      OKLO:"Energy / Power / Nuclear", MNTK:"Energy / Power / Nuclear",
      ETN:"Energy / Power / Nuclear", PNW:"Energy / Power / Nuclear",

      BLK:"Financials / Brokers", BK:"Financials / Brokers",
      NU:"Financials / Brokers", SOFI:"Financials / Brokers",
      COIN:"Financials / Brokers", FUTU:"Financials / Brokers",
      ETOR:"Financials / Brokers", IVZ:"Financials / Brokers",
      PYPL:"Financials / Brokers", UPST:"Financials / Brokers",

      MARA:"Crypto Miners", RIOT:"Crypto Miners",
      BTDR:"Crypto Miners", HUT:"Crypto Miners",
      BMNR:"Crypto Miners", CLSK:"Crypto Miners",

      LLY:"Healthcare / Bio", AMGN:"Healthcare / Bio",
      MRNA:"Healthcare / Bio", ISRG:"Healthcare / Bio",
      EXAS:"Healthcare / Bio", VRTX:"Healthcare / Bio",
      TEVA:"Healthcare / Bio", EW:"Healthcare / Bio",
      CDNA:"Healthcare / Bio", VCYT:"Healthcare / Bio",
      NRIX:"Healthcare / Bio", TMO:"Healthcare / Bio",
      BSX:"Healthcare / Bio", MPW:"Healthcare / Bio",

      AAPL:"Consumer / Brand", ABNB:"Consumer / Brand",
      CELH:"Consumer / Brand", DIS:"Consumer / Brand",
      NFLX:"Consumer / Brand", PEP:"Consumer / Brand",
      SBUX:"Consumer / Brand", WMT:"Consumer / Brand",
      SPOT:"Consumer / Brand", KO:"Consumer / Brand",
      COST:"Consumer / Brand", RBLX:"Consumer / Brand",
      GME:"Consumer / Brand", ZM:"Consumer / Brand",

      CAT:"Industrial / Infra", DE:"Industrial / Infra",
      STLD:"Industrial / Infra", VMC:"Industrial / Infra",
      MP:"Industrial / Infra", OTTR:"Industrial / Infra",
      STRL:"Industrial / Infra", KTOS:"Industrial / Infra",
      LMT:"Industrial / Infra", GE:"Industrial / Infra",
      PH:"Industrial / Infra", TDY:"Industrial / Infra",
      IESC:"Industrial / Infra", GEL:"Industrial / Infra",
      ETRN:"Industrial / Infra", CLS:"Industrial / Infra"
    };

    // ---------- 회사 설명 (조금 더 디테일하게) ----------
    // 많이 이야기한 기업들은 더 길게 적어둔다.
    const companyProfiles = {
      NVDA: `
NVIDIA는 GPU 하드웨어뿐 아니라 CUDA 소프트웨어 스택, 라이브러리, 개발툴, DGX/MGX 서버 레퍼런스 디자인까지 보유한 AI 인프라 플랫폼 기업이다.
데이터센터 매출 비중이 압도적으로 높고, H100·H200·B100·GB200 같은 AI 학습/추론용 GPU가 성장의 중심이다.
CUDA 생태계에 대한 락인 효과가 강해 경쟁사 GPU가 등장하더라도 프레임워크·툴체인·라이브러리 호환성에서 우위가 유지되고 있다.
NVLink·InfiniBand·Spectrum-X 등 네트워크·스위칭 제품으로 GPU 사이의 통신까지 장악하려는 전략을 펼치며, AI 서버 전체 스택에서 존재감을 확대 중이다.
AI 수요 둔화와 하이퍼스케일러의 자체 칩(Trainium·TPU 등)이 중장기 리스크지만, 단기~중기에는 구조적 성장성이 여전히 매우 강한 편이다.
      `,
      AVGO: `
Broadcom은 네트워크 스위칭/라우팅 칩, 스토리지 컨트롤러, NIC, RF·무선 칩, 그리고 VMware 인수로 확보한 인프라 소프트웨어를 동시에 보유한 복합 반도체/소프트웨어 기업이다.
AI 데이터센터에서는 Tomahawk·Jericho 계열 고성능 스위칭 ASIC이 이더넷 기반 AI 클러스터의 핵심 칩으로 쓰이며, 대역폭이 높아질수록 ASP가 올라가는 구조를 가진다.
VMware를 통해 온프레미스·하이브리드 클라우드 가상화 소프트웨어를 판매하면서, 반도체 사이클과 무관한 반복매출 비중도 키우고 있다.
반도체+소프트웨어 조합 덕분에 높은 마진과 견조한 현금창출력을 유지하며, 데이터센터 트래픽 증가에 따른 구조적 수혜가 기대되는 이름이다.
      `,
      SMCI: `
Super Micro Computer는 GPU·CPU 서버, 스토리지, 랙 솔루션을 모듈형으로 빠르게 커스터마이징해 공급하는 서버 ODM/OEM 기업이다.
NVIDIA·AMD·Intel 등과 긴밀히 협력하여 최신 GPU를 가장 빠르게 탑재한 AI 서버를 내놓는 것이 강점이며, 리퀴드 쿨링·고밀도 랙 설계 등 AI 특화 하드웨어 역량이 높다.
전통 OEM(Dell, HPE 등) 대비 제품 출시 속도와 구성 유연성이 뛰어나 하이퍼스케일러·AI 특화 고객들의 수요를 적극적으로 받는 포지션이다.
AI 서버 CAPEX에 높은 레버리지를 가지는 만큼 성장성은 크지만, CAPEX 사이클 둔화 시 매출 변동성·마진 변동성도 함께 커지는 리스크가 존재한다.
      `,
      VRT: `
Vertiv는 데이터센터와 통신시설을 위한 전력 인프라(UPS, PDU), 냉각 시스템(공랭·수랭), 랙 및 모듈형 데이터센터 솔루션을 제공하는 회사다.
GPU 기반 AI 서버는 랙당 수십 kW 이상까지 전력 소모가 증가하고 발열이 극심하기 때문에, 고밀도 파워·쿨링 인프라에 대한 수요가 구조적으로 늘어나고 있다.
Vertiv는 리퀴드 쿨링, 인클로저, 고효율 UPS 등에서 제품 포트폴리오를 빠르게 확장하며 AI 데이터센터용 특화 솔루션 비중을 올리고 있다.
과거에는 경기민감형 인프라 회사에 가까웠지만, 지금은 AI 데이터센터 CAPEX 파도에 올라탄 구조적 성장주로 재평가받고 있다.
      `,
      PLTR: `
Palantir는 대규모·복잡한 데이터를 통합하고 분석해 의사결정으로 연결하는 데이터 플랫폼 기업으로, Gotham(정부/국방), Foundry(상업), AIP(AI Platform)를 보유하고 있다.
기본적으로 데이터 파이프라인·모델·워크플로우를 한 번에 관리할 수 있는 소프트웨어를 제공하며, 정부·국방처럼 미션 크리티컬 분야에 깊숙이 들어가 있다.
AIP는 LLM 및 다양한 AI 모델을 실제 운영 환경에 배포·통제·감사할 수 있게 하는 계층으로, “모델을 직접 만드는 회사”라기보다는 “모델을 활용한 의사결정 계층”에 포지셔닝되어 있다.
정부 매출이 안정적인 캐시카우 역할을 하고, 상업 부분은 AI 도입 수요에 따라 고성장 잠재력이 있지만, 밸류에이션 변동성과 계약 구조에 따른 실적 변동성 리스크도 공존한다.
      `,
      CRDO: `
Credo Technology는 100G~800G, 나아가 1.6T급 고속 데이터 전송을 위한 AEC(Active Electrical Cable), DSP, SerDes 솔루션을 제공하는 팹리스 반도체 기업이다.
AI 데이터센터 내에서 GPU·CPU·NIC·스위치 사이를 저전력·저지연으로 연결하기 위해 고속 인터커넥트가 필수이고, Credo의 솔루션은 전기적 케이블 기반에서 거리·속도 제약을 완화해주는 역할을 한다.
UALink, 고속 이더넷 기반 AI 클러스터 설계 트렌드와 맞물려 수요가 커질 수 있으나, 프로젝트별 변동성과 경쟁사의 진입(브로드컴, 마벨 등)이 리스크 요인이다.
      `,
      ALAB: `
Astera Labs는 CXL, PCIe, 메모리 확장, 리타이머 등 CPU-메모리-가속기-스토리지 사이의 고속 인터커넥트 토폴로지 솔루션을 제공하는 팹리스 반도체 기업이다.
AI 서버에서는 GPU 메모리(HBM) 외에도 CPU 메모리, 스토리지, 기타 가속기와의 데이터 이동 효율이 중요해지고 있으며, CXL 기반 메모리 풀링·확장 구조가 각광받고 있다.
Astera의 제품은 이러한 CXL 토폴로지에서 필수적인 스위치/리타이머 역할을 하며, CXL 생태계가 본격적으로 열릴 경우 매출 레버리지가 크게 발생할 수 있다.
다만 시장이 아직 초기 단계라 고객 채택 속도와 기술 표준 방향, 경쟁사의 진입 여부에 따라 실적과 밸류에이션 변동성이 클 수 있다.
      `,
      ASML: `
ASML은 첨단 반도체 제조에 사용되는 노광장비, 특히 7nm 이하 공정에 필수적인 EUV(극자외선) 노광기를 사실상 독점 공급하는 기업이다.
TSMC, 삼성, 인텔 등 파운드리와 IDM들이 3nm, 2nm 공정에 진입하기 위해서는 ASML 장비가 필수이며, High-NA EUV로 진화하면서 장비당 ASP와 기술 장벽이 더 높아지는 구조다.
AI 칩, HBM, 고급 CPU/GPU를 생산하는 모든 첨단 공정 CAPEX가 ASML 장비 수요로 이어지기 때문에, AI 인프라 장기 CAPEX의 최상위에 있는 공급자라고 볼 수 있다.
다만 미·중 수출 규제, 글로벌 반도체 CAPEX 사이클에 따른 주문 변동성이 리스크다.
      `,
      TSM: `
TSMC는 전 세계 1위 파운드리로, NVIDIA·AMD·Apple·Qualcomm·자체 AI 칩을 만드는 빅테크 등 대부분의 첨단 칩을 생산하는 위탁 제조사이다.
5nm, 3nm, 2nm 등 첨단 공정을 선도하며, AI GPU·CPU·가속기와 HBM, 모바일 AP까지 폭넓게 생산한다.
공정이 미세해질수록 웨이퍼 ASP와 수익성이 올라가는 구조이며, AI 칩 비중이 커질수록 수익성이 좋아지는 방향이다.
지리적 리스크(대만)와 미국·유럽 현지 공장 투자에 따른 CAPEX 부담이 중장기 변수로 존재하지만, 기술 우위 기반의 장기 구조적 성장 스토리는 여전히 유효하다.
      `,
      SITM: `
SiTime은 기존 쿼츠 크리스털 기반 타이밍·클럭 소자를 대체하는 MEMS 기반 타이밍 솔루션을 제공하는 팹리스 기업이다.
데이터센터 서버, 네트워크 장비, 5G 인프라, 자동차, 산업용 기기 등에서 정밀한 타이밍·클럭 제어가 필요하며, 온도·충격·전력 효율 측면에서 MEMS의 장점이 부각되고 있다.
AI 서버·고속 스위치·라우터가 복잡해질수록 타이밍 솔루션의 품질과 유연성이 중요해져 장기 TAM이 넓어질 수 있는 구조지만, 아직 매출 규모가 작아 사이클·고객 의존도가 리스크 요인이다.
      `,
      CDNS: `
Cadence Design Systems는 반도체 설계 자동화(EDA) 소프트웨어와 IP를 제공하는 회사로, 칩 설계자들이 회로 설계·검증·레이아웃·시뮬레이션을 수행할 때 필수적으로 사용하는 툴을 공급한다.
AI칩·고속 인터커넥트·전력 최적화와 같이 복잡도가 높은 설계가 늘어날수록 EDA툴에 대한 의존도는 커지며, Fab/Foundry와의 공정 연계도 강화된다.
소프트웨어 라이선스/구독 기반 비즈니스 모델 덕분에 높은 마진 구조를 유지하고 있으며, 글로벌 칩 설계 CAPEX와 함께 장기적으로 성장하는 올리고폴리 과점 산업의 핵심 플레이어 중 하나다.
      `,
      AMAT: `
Applied Materials는 반도체 웨이퍼 공정 전반(증착, 식각, CMP, 검사 등)에 필요한 장비를 공급하는 종합 반도체 장비 회사이다.
메모리·로직·파운드리 전 영역에 폭넓게 제품을 공급하며, 공정 미세화·3D 구조(HBM, 3D NAND 등)로 인해 웨이퍼당 공정 단계가 늘어나면서 장비 수요도 구조적으로 증가하는 편이다.
AI 칩·HBM 투자 확대로 첨단 공정 CAPEX가 늘어나는 구간에서는 수혜를 받고, 반도체 업황이 꺾이는 구간에서는 주문이 줄어드는 명확한 사이클 산업 특성을 갖는다.
      `,
      LRCX: `
Lam Research는 식각·증착 등 파운드리/메모리 공정에서 핵심이 되는 장비를 공급하는 회사로, 특히 메모리와 3D 구조 공정에 강점을 갖고 있다.
HBM·3D NAND·고집적 DRAM과 같이 층수가 많아지고 구조가 복잡해질수록 식각·증착 공정의 난이도가 높아지며, Lam 장비의 중요성이 커진다.
AI 시대에 메모리 대역폭과 용량이 중요해지면서 메모리 CAPEX가 장기적으로 늘어날 경우, Lam은 그 상단에 있는 장비 공급자로서 구조적 수혜를 볼 수 있다.
      `,
      MRVL: `
Marvell Technology는 데이터센터, 5G 통신, 스토리지, 자동차 등에서 사용되는 고성능 SoC·네트워크·스토리지 컨트롤러를 설계하는 팹리스 반도체 기업이다.
AI 데이터센터에서는 커스텀 ASIC·가속기, 고속 네트워크·스토리지 솔루션에서 역할을 할 수 있으며, 특히 하이퍼스케일러들의 자체 AI 칩 설계 프로젝트에 참여하는 구조가 관심 포인트다.
5G·클라우드·자동차 등 다변화된 엔드마켓을 가지고 있어 특정 영역 사이클에 대한 완충 역할도 수행한다.
      `,
      MU: `
Micron Technology는 DRAM·NAND·HBM 등 메모리 반도체를 공급하는 기업으로, 서버·PC·모바일·자동차·산업용 등 전 영역에 메모리를 공급한다.
AI 학습용 GPU에는 대용량·초고대역폭 메모리인 HBM이 필수로 탑재되며, HBM CAPEX·라인 전환이 본격화될수록 Micron의 수익성이 개선될 수 있다.
메모리 산업 특성상 공급·수요 불균형에 따라 가격 변동성과 실적 변동성이 크지만, AI 시대에는 고부가 메모리 비중이 늘어나는 방향이라 장기 체질은 개선되는 중이다.
      `,
      MSFT: `
Microsoft는 Windows, Office, Azure, GitHub, LinkedIn, Dynamics, Xbox 등 광범위한 포트폴리오를 보유한 빅테크로, 최근에는 Copilot과 Azure OpenAI를 중심으로 AI 플랫폼 회사로 재정의되고 있다.
Azure 클라우드는 NVIDIA GPU와 자체 AI 칩(MAIA, Azure Cobalt 등)을 조합하여 AI 인프라를 구축하고 있으며, OpenAI와의 전략적 파트너십을 통해 GPT 계열 모델을 가장 먼저 상용화해왔다.
Office/M365, Windows, 서버, Azure 등 핵심 비즈니스가 반복매출 구조라 캐시플로우가 매우 강하고, AI 도입이 성공적으로 자리잡으면 클라우드 ARPU 상승과 Copilot 프리미엄을 통한 추가 수익이 기대된다.
      `,
      AMZN: `
Amazon은 이커머스·프라임·물류·광고와 함께 AWS 클라우드를 보유한 빅테크로, AWS가 회사 전체 이익의 상당 부분을 책임져왔다.
AWS는 NVIDIA GPU와 자체 칩 Trainium/Inferentia를 통해 AI 학습·추론 인프라를 제공하고, Amazon Bedrock 및 다양한 AI 서비스로 고객에게 모델/플랫폼을 제공하는 구조다.
또한 물류/재고/추천/검색에 AI를 깊게 적용하며, 리테일+광고+클라우드 영역에서 동시다발적으로 AI를 도입하는 케이스 스터디 역할을 하고 있다.
      `,
      GOOGL: `
Alphabet(구글)은 검색, 유튜브, 안드로이드, GCP, 지도, 광고 네트워크 등을 보유한 빅테크로, 광고와 클라우드를 두 축으로 성장해왔다.
TPU라는 자체 AI 가속기를 설계·운영하며, Gemini 등 LLM을 통해 검색·광고·클라우드·워크스페이스 전반에 AI를 녹이고 있다.
광고 비즈니스 구조가 AI 도입으로 어떻게 변화할지에 대한 불확실성은 있지만, 제대로 모네타이즈할 경우 클릭당 가치 상승 여지도 있는 상태다.
      `,
      NET: `
Cloudflare는 글로벌 CDN, DDoS 방어, DNS, WAF, Zero Trust 보안, 엣지 컴퓨팅(Workers) 플랫폼을 제공하는 인터넷 인프라 기업이다.
사용자와 가까운 네트워크 엣지에서 서비스를 처리하는 구조라, API·웹서비스·게임·AI inference를 빠르게 제공하는 데 적합하다.
AI 모델 추론을 엣지에서 수행하려는 흐름과 함께 Workers AI, 벡터 DB 등의 서비스도 확장 중이며, 구독형 SaaS 모델이라 높은 성장률과 마진을 목표로 하고 있다.
      `,
      SNOW: `
Snowflake는 클라우드 기반 데이터 웨어하우스·데이터 클라우드를 제공하는 기업으로, AWS·Azure·GCP 위에서 고객 데이터를 저장·분석·공유하는 플랫폼이다.
AI 모델의 연료가 되는 정제된 데이터·메타데이터·카탈로그를 관리하는 역할을 하며, 최근에는 Snowflake Cortex, Native Apps 등으로 AI·애플리케이션 계층까지 확장하고 있다.
고객이 Snowflake 위에 데이터를 모으면 클라우드간 전환 비용이 커지는 데이터 락인 효과가 있고, 사용량 기반 요금제로 데이터/쿼리 사용량 증가에 따라 매출이 확대된다.
      `,
      DDOG: `
Datadog은 클라우드 인프라 모니터링, APM, 로그 관리, 보안, RUM 등 관측성(Observability) 플랫폼을 제공하는 SaaS 기업이다.
마이크로서비스·컨테이너·서버리스 등 복잡한 클라우드 환경에서 서비스 상태와 성능을 한 눈에 볼 수 있게 하는 도구로, 클라우드 채택과 함께 구조적으로 성장해왔다.
AI 서비스도 결국 API와 마이크로서비스 형태로 돌아가기 때문에, AI 관련 워크로드 증가 역시 관측성 니즈를 키우는 방향으로 작용한다.
      `,
      NOW: `
ServiceNow는 IT·업무 워크플로우 자동화를 위한 플랫폼으로, ITSM, HR, 보안, 운영, 고객 서비스 등 기업 내 다양한 프로세스를 디지털로 연결해준다.
LLM과 AI를 결합해 티켓 분류·요약·자동응답·추천 워크플로우 등을 구현하는 방향으로 진화 중이며, 'AI로 업무 흐름을 실제로 바꾸는' 계층에 포지셔닝되어 있다.
대부분 구독형 라이선스 기반이라 반복매출 구조가 탄탄하고, 대형 엔터프라이즈 고객으로 확장하면서 장기 성장성이 높게 평가된다.
      `,
      CRM: `
Salesforce는 세일즈·마케팅·서비스·커머스·데이터 클라우드 등 CRM 중심의 SaaS 포트폴리오를 제공하는 기업이다.
고객·매출·캠페인 데이터를 데이터 클라우드에 모아두고, Einstein AI와 GPT를 활용해 리드 점수화, 개인화 마케팅, 자동 이메일 작성, 영업 인사이트 추천 등을 제공한다.
CRM 데이터에 AI를 붙이는 구조라 고객 이탈이 어려운 편이고, 모듈 간 크로스셀링·업셀링 여지가 크다는 점이 강점이다.
      `,
      BE: `
Bloom Energy는 고체산화물 연료전지(SOFC)를 기반으로 하는 분산 전력 솔루션을 제공하는 회사다.
천연가스·수소를 연료로 전력을 생산하며, 데이터센터·상업시설·산업현장에서 그리드 의존도를 낮추고 안정적인 전력을 제공하려는 수요를 겨냥하고 있다.
AI 데이터센터의 전력 수요와 그리드 제약이 심해질수록 온사이트 파워·분산 발전 솔루션에 대한 관심이 커질 수 있으나, 경제성과 정책 환경에 따라 수요 변동성이 크다는 리스크가 있다.
      `,
      SMR: `
NuScale Power는 소형 모듈형 원자로(SMR) 설계를 개발하는 회사로, 기존 대형 원전보다 작은 단위로 모듈화된 원자로를 제공하는 것을 목표로 한다.
장기적으로 데이터센터·산업·원격지역에 24/7 탄소중립 전력을 공급하기 위한 옵션으로 거론되지만, 아직 인허가·상용화 단계에서 시간이 많이 필요하다.
정책·규제·사회적 수용성 등 비즈니스 외부 변수에 상당히 의존하는 구조다.
      `,
      OKLO: `
Oklo는 더 작은 스케일의 마이크로 원자로를 개발해 데이터센터·원격지역 등에서 자체 전원으로 사용하는 모델을 지향하는 초기 단계 기업이다.
데이터센터의 전력 수요를 SMR보다 더 작은 단위로 맞추려는 비전이 있지만, 기술·규제·정책 불확실성이 극도로 높은 영역이다.
장기적인 옵션성(옵션 플레이)에 가깝고, 단기 수익성·실적 가시성은 매우 낮은 편이다.
      `,
      COIN: `
Coinbase는 미국 중심의 암호화폐 거래소로, 리테일·기관을 대상으로 현물·파생상품 거래, 커스터디, 스테이킹, 온체인 인프라 등을 제공한다.
규제 준수와 보안 측면에서 비교적 신뢰도 높은 거래소라는 인식을 갖고 있으며, 온체인 경제와 전통 금융 사이를 잇는 브리지 역할을 한다.
비트코인·알트코인 가격과 거래량에 민감하게 반응하는 수익 구조지만, 장기적으로 ETF, 기관 커스터디, 온체인 결제 등 새로운 비즈니스 라인을 추가하려 하고 있다.
      `,
      MARA: `
Marathon Digital은 대규모 비트코인 채굴 인프라를 운영하는 회사로, 해시레이트 확대와 전력 계약을 통해 채굴 효율을 높이는 데 집중한다.
비트코인 가격에 높은 레버리지를 가지는 구조라 상승장에서는 이익 레버리지가 크게 나타나지만, 하락장에서는 손실·자본 조달 리스크가 커지는 전형적인 고변동 채굴주다.
일부 채굴 인프라는 향후 AI/HPC 콜로케이션으로 전환하는 옵션이 거론되기도 하지만, 현재 매출 구조는 비트코인 채굴에 거의 전적으로 의존하고 있다.
      `,
      RIOT: `
Riot Platforms는 북미 기반 비트코인 채굴 기업으로, 장기 전력 계약을 기반으로 해시레이트를 확장하고 있다.
비트코인 가격과 난이도, 전력비용에 따라 실적 변동성이 크며, 채굴 장비 CAPEX·전력 인프라 투자에 대한 재무 레버리지 리스크가 있다.
      `,
      BTDR: `
Bitdeer는 비트코인 채굴·클라우드 마이닝·호스팅을 제공하는 기업으로, 채굴 인프라를 직접 운영하거나 고객에게 임대하는 비즈니스 모델을 가지고 있다.
해시레이트와 비트코인 가격에 높은 레버리지 구조를 가지며, 자본집약·전력집약적인 비즈니스 특성상 사이클 변동성이 크다.
      `,
      HUT: `
Hut 8 Mining은 북미 기반 비트코인 채굴 기업으로, 데이터센터 인프라와 전력 계약을 바탕으로 채굴과 호스팅 사업을 병행한다.
장기적으로 일부 데이터센터 용량을 AI/HPC로 전환할 가능성이 거론되지만, 현재 매출은 비트코인 가격과 채굴 환경에 크게 좌우된다.
      `,
      CLSK: `
CleanSpark는 비트코인 채굴 기업으로, 상대적으로 효율적인 장비·전력 조합으로 해시레이트당 비용을 낮추려는 전략을 취하고 있다.
비트코인 채굴에 따른 수익성은 시장 사이클과 난이도에 따라 크게 변동하며, 전력비·CAPEX 관리가 핵심 변수다.
      `,
      AAPL: `
Apple은 아이폰·맥·아이패드·워치·에어팟 등 하드웨어와 iOS·맥OS·App Store·서비스 구독을 결합한 생태계를 구축한 빅테크다.
하드웨어 교체주기와 서비스 구독이 결합된 구조라 강한 락인 효과와 꾸준한 현금창출력을 보유하고 있으며, 자체 칩 설계(Apple Silicon)로 성능·전력 효율을 끌어올렸다.
AI 측면에서는 온디바이스 AI와 프라이버시를 강조하는 방향으로 전략을 짜고 있고, 생태계 내에서 서서히 노출을 늘리고 있다.
      `,
      ABNB: `
Airbnb는 개인과 숙박 공간 제공자를 연결하는 숙박·체험 공유 플랫폼으로, 자산을 직접 보유하지 않고 수수료를 받는 마켓플레이스 모델이다.
호텔 대비 다양한 숙소와 현지 경험을 제공하며, 여행 수요 회복과 함께 구조적 성장을 이어왔다.
규제·세금 이슈, 거시 환경에 따른 여행 수요 변동이 주요 변수다.
      `,
      ADBE: `
Adobe는 포토샵, 프리미어, 일러스트레이터, 애크로뱃 등 크리에이티브 및 문서 소프트웨어를 제공하는 기업으로, 대부분을 구독형 Creative Cloud·Document Cloud로 전환하였다.
창작·디자인·영상·마케팅 등 디지털 콘텐츠 제작 툴의 사실상 표준에 가까우며, AI 이미지·영상 생성 기능(Firefly 등)을 내장해 워크플로우 생산성을 높이는 방향으로 진화하고 있다.
구독형 소프트웨어 특성상 높은 마진과 반복매출 구조를 바탕으로 안정적인 성장 스토리를 가지고 있다.
      `,
      AG: `
First Majestic Silver는 은(실버) 중심의 귀금속 채굴 기업으로, 은 가격에 레버리지된 플레이 성격이 강하다.
실물 은 수급뿐 아니라 금리, 달러, 금/은 가격 스프레드 등 거시 변수에 민감하게 반응하며, 변동성이 큰 편이다.
      `,
      AGX: `
Argan은 발전소·산업 인프라 EPC(설계·조달·시공) 프로젝트를 수행하는 엔지니어링 회사다.
가스발전, 재생에너지 등 발전 프로젝트 수주에 따라 실적이 크게 좌우되며, 프로젝트 수·규모에 따라 분기별 변동성이 크다.
      `,
      ALL: `
Allstate는 자동차·주택·생명보험 등을 제공하는 대형 손해보험사다.
보험료율·손해율·투자수익률에 따라 실적이 좌우되며, 장기적으로는 보험료 인상과 리스크 관리 능력이 경쟁력의 핵심이다.
      `,
      AMGN: `
Amgen은 바이오의약품 중심의 빅파마로, 항체·재조합 단백질 기반 치료제 포트폴리오를 보유하고 있다.
만성 질환·희귀질환 분야에서 캐시카우 제품과 파이프라인을 동시에 운영하며, 바이오시밀러와의 경쟁·특허만료 리스크를 관리하는 구조다.
      `,
      ANET: `
Arista Networks는 클라우드 데이터센터용 고성능 스위치와 EOS 네트워크 운영체제를 제공하는 네트워킹 회사다.
하이퍼스케일러·클라우드 고객 비중이 높으며, AI 클러스터를 이더넷 기반으로 구성하는 흐름에서 고대역폭 스위치 수요가 증가하는 구조적 수혜를 받고 있다.
Broadcom 스위칭 ASIC 위에 소프트웨어·시스템 통합 역량을 더해 차별화된 네트워크 솔루션을 제공한다.
      `,
      ANSS: `
Ansys는 구조·유체·전자기 등 물리 시뮬레이션을 수행하는 CAE(Computer-Aided Engineering) 소프트웨어를 제공하는 기업이다.
자동차·항공우주·반도체·전력 전자 등 복잡한 물리 환경을 가진 제품 설계에서 필수 도구로 자리잡고 있으며, 모델 복잡성이 높아질수록 CAE 의존도도 함께 증가한다.
구독·라이선스 기반 비즈니스 모델로 높은 마진과 반복매출 구조를 가지고 있다.
      `,
      APP: `
AppLovin은 모바일 광고·측정·수익화 플랫폼과 게임 퍼블리싱 사업을 동시에 운영하는 기업이다.
기기·앱 사용 데이터를 활용해 퍼포먼스 광고를 최적화하고, 자사·파트너 게임의 수익화를 극대화하는 모델을 갖고 있다.
광고 환경 규제(ATT 등) 변화와 경쟁사 대비 타게팅 성능이 핵심 변수다.
      `,
      ARM: `
Arm Holdings는 모바일·임베디드 등 저전력 CPU 아키텍처 IP를 설계하고 라이선스로 수익을 내는 기업이다.
스마트폰·IoT뿐 아니라 서버·AI 가속기·자동차 등으로 아키텍처 영향력을 확장하고 있으며, Arm 기반 칩의 출하량이 늘어날수록 로열티 수익이 늘어나는 구조다.
x86 대비 전력 효율이 높다는 점이 서버·클라우드 분야에서도 점점 더 부각되고 있다.
      `,
      BE: companyProfiles.BE, // 위에서 이미 정의
      BK: `
BNY Mellon은 글로벌 자산보관·수탁·자산관리 업무에 특화된 금융사로, 금융 시스템의 백엔드 인프라 역할을 한다.
자산운용사·기관투자자의 자산을 보관·정산·관리하면서 수수료 수익을 얻는 구조이며, 거래량·시장 규모에 연동되는 안정적인 비즈니스 모델을 갖고 있다.
      `,
      BLK: `
BlackRock은 세계 최대 자산운용사로, iShares ETF·인덱스 펀드·액티브 펀드·대체투자 등 다양한 운용 상품을 제공한다.
글로벌 자본시장 전체에 분산된 수수료 비즈니스라 시장 규모·자산가격 상승에 레버리지되는 구조이고, ETF·인덱스화 트렌드의 핵심 수혜자다.
      `,
      BMNR: `
BitMine Immersion Technologies는 침지식 냉각(Immersion Cooling) 기반 암호화폐 채굴 인프라에 초점을 둔 기업이다.
채굴 효율을 높이고 전력·쿨링 비용을 낮추는 방향으로 하드웨어·인프라를 설계하지만, 비트코인 가격과 난이도에 따른 변동성에서 자유롭지 않다.
      `,
      BSX: `
Boston Scientific은 심혈관·신경계·비뇨기·내시경 등 다양한 영역의 의료기기를 제조하는 기업이다.
고령화와 의료 기술 발전에 따라 구조적인 수요가 증가하는 분야에 강점이 있으며, 새로운 시술법과 디바이스 혁신이 성장을 견인한다.
      `,
      CAT: `
Caterpillar는 건설·광산·에너지 분야에서 사용되는 중장비 대표 기업으로, 굴착기·덤프 트럭·엔진 등을 공급한다.
인프라 투자·자원개발 CAPEX에 따라 실적이 크게 좌우되는 전형적인 경기민감 산업에 속하며, 글로벌 인프라 투자 확대의 장기 수혜를 볼 수 있다.
      `,
      CEG: companyProfiles.CEG || `
Constellation Energy는 원자력·가스·재생에너지 발전 자산을 보유한 전력 회사로, 대형 발전소 운영을 통해 도매 전력을 공급한다.
전력 가격·연료비·정책에 따라 실적이 달라지며, 탄소중립·원전 재평가 흐름과 데이터센터 전력 수요 증가가 장기 테마로 작용할 수 있다.
      `,
      CELH: `
Celsius Holdings는 기능성 에너지 드링크를 제조·판매하는 회사로, 건강한 라이프스타일 이미지와 강한 브랜드 마케팅으로 고성장을 이어왔다.
대형 유통망 입점과 인플루언서·SNS 마케팅을 결합해 빠르게 점유율을 높이는 전략을 취하고 있다.
      `,
      CL: `
Colgate-Palmolive는 치약·칫솔·비누·세제 등 기초 생활용품을 제조·판매하는 글로벌 소비재 기업이다.
경기 변동에도 수요가 크게 줄지 않는 방어적 성격을 가진 캐시카우 사업이며, 신흥국 성장과 프리미엄 제품 믹스 개선이 장기 성장 요소다.
      `,
      CLSK: companyProfiles.CLSK,
      CLS: `
Celestica는 서버·네트워크장비·산업·에너지 장비 등 다양한 하드웨어를 설계·제조하는 EMS/ODM 기업이다.
AI 서버·통신·전력 인프라 등 고부가 프로젝트 비중이 늘어나면서 마진 구조가 과거보다 개선되는 추세며, 고객 다변화와 프로젝트 믹스가 핵심 변수다.
      `,
      COHR: `
Coherent는 통신, 디스플레이, 반도체, 방산 등에서 사용되는 레이저·광학·포토닉스 제품을 제공하는 기업이다.
광학통신과 고출력 레이저, 포토닉스 응용 분야가 성장하면서 장기적인 포지션이 좋아지고 있지만, 각 최종시장의 사이클 영향도 동시에 받는다.
      `,
      COST: `
Costco는 멤버십 기반 창고형 할인점을 운영하는 소매업체로, 저마진·고회전 구조를 회원제와 결합해 높은 효율을 만든 기업이다.
회원 수 증가와 동일점포 매출 성장이 주요 성장 동력이며, 멤버십 수수료는 경기 상황과 무관하게 비교적 안정적으로 유지되는 캐시카우 역할을 한다.
      `,
      // ... 이하 나머지 종목들도 비슷한 패턴으로 2~4문장 요약을 계속 추가 가능
      // 여기서는 길이 제한 때문에 핵심·빈도 높은 종목 위주로 더 자세히 넣었고
      // 나머지는 필요할 때 점진적으로 보강하면 됨.
    };

    // 비어 있는 종목에 기본 설명 넣기 (최소 한 줄이라도 나오게)
    stocks.forEach(s => {
      if (!companyProfiles[s.symbol]) {
        companyProfiles[s.symbol] = `${s.name} (${s.symbol})에 대한 상세 리포트는 아직 요약 중입니다. 기본적으로 섹터 내에서 일반적인 역할을 수행하는 기업으로, 재무/성장성/리스크를 개별적으로 추가 분석해서 보는 것이 좋습니다.`;
      }
    });

    const stakingManual = [
      { asset: "AVAX", platform: "Bybit Earn",      apy: 7.5, note: "30d Lock (예시)" },
      { asset: "SUI",  platform: "On-chain Staking", apy: 6.2, note: "Validator (예시)" },
      { asset: "APT",  platform: "On-chain Staking", apy: 7.0, note: "예시 값" }
    ];

    let usdKrwRate = null;
    let quoteCache = {};

    function formatNumber(n, decimals = 2) {
      if (n === null || n === undefined || isNaN(n)) return "–";
      return Number(n).toLocaleString("en-US", {
        minimumFractionDigits: decimals,
        maximumFractionDigits: decimals
      });
    }

    function setLastUpdated() {
      const el = document.getElementById("last-updated");
      const now = new Date();
      const pad = (x) => String(x).padStart(2, "0");
      el.textContent =
        `Last update ${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())} `
        + `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
    }

    // ---------- Equities 테이블 ----------
    function renderStocksTableSkeleton() {
      const container = document.getElementById("stocks-container");
      if (!container) return;

      const groups = {};
      for (const s of stocks) {
        const sector = sectorTag[s.symbol] || "Other / Unclassified";
        if (!groups[sector]) groups[sector] = [];
        groups[sector].push(s);
      }
      const sectorNames = Object.keys(groups).sort();

      const html = sectorNames.map((sector) => {
        const rows = groups[sector]
          .sort((a, b) => a.symbol.localeCompare(b.symbol))
          .map((s) => `
            <tr class="clickable-row" data-symbol="${s.symbol}">
              <td>${s.symbol}</td>
              <td>${s.name}</td>
              <td id="price-${s.symbol}" class="muted">…</td>
              <td id="chg-${s.symbol}" class="muted">…</td>
              <td id="chgPct-${s.symbol}" class="muted">…</td>
            </tr>
          `).join("");
        return `
          <div class="sector-block">
            <div class="sector-title">${sector}</div>
            <table>
              <thead>
                <tr>
                  <th data-col="symbol" class="sortable">Symbol</th>
                  <th data-col="name">Name</th>
                  <th data-col="price" class="sortable">Price (USD)</th>
                  <th data-col="change" class="sortable">Change</th>
                  <th data-col="changePct" class="sortable">Δ%</th>
                </tr>
              </thead>
              <tbody>
                ${rows}
              </tbody>
            </table>
          </div>
        `;
      }).join("");

      container.innerHTML = html;

      // 행 클릭 이벤트
      document
        .querySelectorAll("#stocks-container .clickable-row")
        .forEach((row) => {
          row.addEventListener("click", () => {
            const sym = row.getAttribute("data-symbol");
            toggleInsight(row, sym);
          });
        });

      // 헤더 정렬 이벤트
      attachSortingHandlers();
    }

    function attachSortingHandlers() {
      const sectorBlocks = document.querySelectorAll("#stocks-container .sector-block");
      sectorBlocks.forEach((block) => {
        const table = block.querySelector("table");
        const tbody = table.querySelector("tbody");
        const headers = table.querySelectorAll("th");

        headers.forEach((th, idx) => {
          const col = th.getAttribute("data-col");
          if (!col || (col !== "price" && col !== "change" && col !== "changePct" && col !== "symbol")) {
            return;
          }
          th.classList.add("sortable");
          th.addEventListener("click", () => {
            const currentDir = th.getAttribute("data-sort-dir") || "none";
            const newDir = currentDir === "asc" ? "desc" : "asc";
            headers.forEach(h => h.removeAttribute("data-sort-dir"));
            th.setAttribute("data-sort-dir", newDir);

            const rows = Array.from(tbody.querySelectorAll("tr"))
              .filter(r => !r.classList.contains("insight-row"));

            rows.sort((a, b) => {
              const aText = a.children[idx].innerText.replace(/,/g,"");
              const bText = b.children[idx].innerText.replace(/,/g,"");
              let comp = 0;
              if (col === "symbol") {
                comp = aText.localeCompare(bText);
              } else {
                const aVal = parseFloat(aText);
                const bVal = parseFloat(bText);
                if (isNaN(aVal) && isNaN(bVal)) comp = 0;
                else if (isNaN(aVal)) comp = 1;
                else if (isNaN(bVal)) comp = -1;
                else comp = aVal - bVal;
              }
              return newDir === "asc" ? comp : -comp;
            });

            rows.forEach(r => tbody.appendChild(r));
          });
        });
      });
    }

    function applyQuoteToRow(symbol, quote) {
      const priceEl = document.getElementById(`price-${symbol}`);
      const chgEl = document.getElementById(`chg-${symbol}`);
      const chgPctEl = document.getElementById(`chgPct-${symbol}`);
      if (!priceEl || !chgEl || !chgPctEl) return;

      const cls =
        quote.change > 0 ? "positive" :
        quote.change < 0 ? "negative" : "muted";

      priceEl.textContent = formatNumber(quote.price, 2);
      chgEl.textContent = formatNumber(quote.change, 2);
      chgPctEl.textContent =
        isNaN(quote.changePct)
          ? "–"
          : `${quote.changePct > 0 ? "+" : ""}${quote.changePct.toFixed(2)}%`;
      chgEl.className = cls;
      chgPctEl.className = cls;
      priceEl.className = "";
    }

    async function loadAllQuotesPolygon() {
      quoteCache = {};
      const BATCH_SIZE = 40;
      for (let i = 0; i < stocks.length; i += BATCH_SIZE) {
        const batch = stocks.slice(i, i + BATCH_SIZE);
        const tickers = batch.map(s => s.symbol).join(",");
        try {
          const url = `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers?tickers=${encodeURIComponent(tickers)}&apiKey=${POLYGON_KEY}`;
          const res = await fetch(url);
          const data = await res.json();
          if (!data || !data.tickers) continue;
          data.tickers.forEach(t => {
            const symbol = t.ticker;
            const price = t.lastTrade && t.lastTrade.p ? t.lastTrade.p : null;
            const change = t.todaysChange ?? null;
            const changePct = t.todaysChangePerc ?? null;
            const quote = { price, change, changePct };
            quoteCache[symbol] = quote;
            applyQuoteToRow(symbol, quote);
          });
        } catch (e) {
          console.error("Polygon batch error", e);
        }
      }
    }

    function toggleInsight(row, symbol) {
      const next = row.nextElementSibling;
      const hasInsight = next && next.classList.contains("insight-row");

      // 같은 심볼의 insight가 바로 아래 열려 있으면 → 제거(접기) 후 종료
      if (hasInsight && next.getAttribute("data-symbol") === symbol) {
        next.remove();
        return;
      }

      // 다른 곳에 열려 있는 insight 전부 제거
      document
        .querySelectorAll("#stocks-container .insight-row")
        .forEach(r => r.remove());

      showInlineInsight(row, symbol);
    }

    function showInlineInsight(row, symbol) {
      const info = stocks.find(s => s.symbol === symbol);
      const sector = sectorTag[symbol] || "Other / Unclassified";
      if (!info) return;

      const profile = companyProfiles[symbol] || "이 종목에 대한 요약이 아직 정리되지 않았습니다.";

      const tr = document.createElement("tr");
      tr.className = "insight-row";
      tr.setAttribute("data-symbol", symbol);
      const td = document.createElement("td");
      td.colSpan = 5;

      const containerId = `tv-chart-${symbol}`;
      const newsId = `news-${symbol}`;

      td.innerHTML = `
        <div class="insight-box">
          <strong>${symbol}</strong> · ${info.name}<br/>
          <span class="muted">Sector group: ${sector}</span>
          <p style="margin-top:6px; white-space:pre-line;">${profile.trim()}</p>
          <div style="margin-top:8px; height:260px;">
            <div id="${containerId}" style="width:100%; height:100%;"></div>
          </div>
          <div class="news-title">Latest News (Finnhub)</div>
          <ul class="news-list" id="${newsId}">
            <li class="muted">Loading news…</li>
          </ul>
        </div>
      `;
      tr.appendChild(td);

      const parent = row.parentNode;
      if (row.nextSibling) parent.insertBefore(tr, row.nextSibling);
      else parent.appendChild(tr);

      if (window.TradingView) {
        new TradingView.widget({
          container_id: containerId,
          symbol: symbol,
          interval: "60",
          timezone: "Etc/UTC",
          theme: "light",
          style: "1",
          height: "100%",
          width: "100%",
          hide_top_toolbar: false,
          hide_legend: false,
          withdateranges: true,
          locale: "en"
        });
      }

      loadNewsForSymbol(symbol, newsId);
    }

    async function loadNewsForSymbol(symbol, newsElementId) {
      const el = document.getElementById(newsElementId);
      if (!el) return;
      const now = new Date();
      const to = now.toISOString().slice(0,10);
      const fromDate = new Date(now.getTime() - 7*24*60*60*1000);
      const from = fromDate.toISOString().slice(0,10);

      try {
        const url = `https://finnhub.io/api/v1/company-news?symbol=${encodeURIComponent(symbol)}&from=${from}&to=${to}&token=${FINNHUB_KEY}`;
        const res = await fetch(url);
        const data = await res.json();
        if (!Array.isArray(data) || data.length === 0) {
          el.innerHTML = `<li class="muted">최근 7일간 등록된 뉴스가 없습니다.</li>`;
          return;
        }
        const top = data.slice(0, 5);
        el.innerHTML = top.map(n => {
          const title = n.headline || "Untitled";
          const url = n.url || "#";
          const date = n.datetime ? new Date(n.datetime * 1000) : null;
          const dateStr = date
            ? `${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,"0")}-${String(date.getDate()).padStart(2,"0")}`
            : "";
          return `<li><a href="${url}" target="_blank" rel="noopener noreferrer">${title}</a> <span class="muted" style="font-size:10px;">${dateStr}</span></li>`;
        }).join("");
      } catch (e) {
        console.error("Finnhub news error", e);
        el.innerHTML = `<li class="muted">뉴스 로딩 오류</li>`;
      }
    }

    // ---------- FX ----------
    async function fetchFX() {
      const tbody = document.querySelector("#fx-table tbody");
      if (!tbody) return;
      tbody.innerHTML = `<tr><td colspan="4" class="muted">Loading…</td></tr>`;

      const symbols = ["USD","EUR","CHF","JPY","CNY"];
      try {
        const res = await fetch("https://api.exchangerate.host/latest?base=KRW&symbols=USD,EUR,JPY,CNY,CHF");
        if (!res.ok) throw new Error("FX HTTP error");
        const data = await res.json();
        const rates = data.rates || {};

        const rows = symbols.map((sym) => {
          const v = rates[sym];
          if (!v) {
            return `<tr>
              <td>${sym}/KRW</td>
              <td class="muted">–</td>
              <td class="muted">–</td>
              <td class="muted">–</td>
            </tr>`;
          }
          // base = KRW, v = 1 KRW in sym → 1 sym = 1/v KRW
          const rate = 1 / v;
          if (sym === "USD") usdKrwRate = rate;

          return `<tr>
            <td>${sym}/KRW</td>
            <td>${formatNumber(rate, sym === "JPY" ? 3 : 2)}</td>
            <td class="muted">–</td>
            <td class="muted">–</td>
          </tr>`;
        }).join("");

        tbody.innerHTML = rows;
      } catch (e) {
        console.error("FX error", e);
        tbody.innerHTML = `<tr><td colspan="4" class="muted">Error</td></tr>`;
      }
    }

    // ---------- Crypto ----------
    async function fetchCryptos() {
      const tbody = document.querySelector("#crypto-table tbody");
      if (!tbody) return;
      tbody.innerHTML = `<tr><td colspan="6" class="muted">Loading…</td></tr>`;

      try {
        const url =
          "https://api.coingecko.com/api/v3/coins/markets" +
          "?vs_currency=usd&order=market_cap_desc&per_page=15&page=1&sparkline=false&price_change_percentage=24h";
        const res =
          await fetch(url, { headers: { "Accept": "application/json" } });
        if (!res.ok) throw new Error("crypto HTTP error");
        const data = await res.json();

        const rows = data.map((c) => {
          const usd = c.current_price;
          const krw = usdKrwRate ? usd * usdKrwRate : null;
          const chg = c.price_change_percentage_24h;
          const vol = c.total_volume;
          const cls =
            chg > 0 ? "positive" : chg < 0 ? "negative" : "muted";
          const pctText =
            chg === null || chg === undefined || isNaN(chg)
              ? "–"
              : `${chg > 0 ? "+" : ""}${chg.toFixed(2)}%`;

          return `
            <tr>
              <td>${(c.symbol || "").toUpperCase()}</td>
              <td>${c.name}</td>
              <td>${formatNumber(usd, 2)}</td>
              <td>${formatNumber(krw, 0)}</td>
              <td class="${cls}">${pctText}</td>
              <td>${formatNumber(vol, 0)}</td>
            </tr>
          `;
        }).join("");

        tbody.innerHTML = rows;
      } catch (e) {
        console.error("crypto error", e);
        tbody.innerHTML = `<tr><td colspan="6" class="muted">Error</td></tr>`;
      }
    }

    // ---------- Staking ----------
    function renderStakingManual() {
      const tbody = document.querySelector("#staking-table tbody");
      if (!tbody) return;
      const rows = stakingManual.map((s) => `
        <tr>
          <td>${s.asset}</td>
          <td>${s.platform}</td>
          <td>${s.apy.toFixed(2)}%</td>
          <td>${s.note}</td>
        </tr>
      `).join("");
      tbody.innerHTML = rows;
    }

    async function refreshAll() {
      setLastUpdated();
      renderStakingManual();
      await fetchFX();
      await Promise.all([
        fetchCryptos(),
        loadAllQuotesPolygon()
      ]);
    }

    document
      .getElementById("manual-refresh")
      .addEventListener("click", () => {
        refreshAll();
      });

    // 초기 렌더
    renderStocksTableSkeleton();
    refreshAll();
  </script>
</body>
</html>
